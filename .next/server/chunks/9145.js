exports.id=9145,exports.ids=[9145],exports.modules={5561:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>o,A:()=>p});var d=c(21124),e=c(38301);let f="https://api.gajkesaristeels.in",g=`${f}/user/token`,h=`${f}/user/logout`,i=`${f}/user/manage/get`,j=`${f}/user/manage/current-user`,k={getToken:()=>null,setToken:a=>{},removeToken:()=>{},getAuthHeader:()=>{let a=k.getToken();return a?`Bearer ${a}`:null},setUserRole:a=>{},getUserRole:()=>null,getUserData:()=>null,setCurrentUser:a=>{},getCurrentUser:()=>null},l={login:async a=>{try{let b=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok){let a=await b.text();throw Error(`Login failed: ${b.status} ${a}`)}let[c,d]=(await b.text()).split(" ");if(!d)throw Error("Invalid response format from server");k.setToken(d);try{console.log("Fetching role for username:",a.username),console.log("Token being used:",d);let b=await fetch(`${i}?username=${a.username}`,{credentials:"include",method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(b.ok){let a=await b.json();k.setUserRole(a),console.log("User role data stored:",a)}else{console.warn("Failed to fetch user role data:",b.status,b.statusText);let a=await b.text();console.warn("Error response:",a)}}catch(a){console.warn("Error fetching user role data:",a)}try{let a=await fetch(j,{credentials:"include",method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(a.ok){let b=await a.json();k.setCurrentUser(b),console.log("Current user data stored:",b)}else console.warn("Failed to fetch current user data:",a.status)}catch(a){console.warn("Error fetching current user data:",a)}return{token:d,role:c||"USER"}}catch(a){throw console.error("Login error:",a),a}},logout:async()=>{try{let a=k.getToken();if(!a)return void k.removeToken();let b=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});k.removeToken(),b.ok||console.warn("Logout request failed, but token was cleared locally")}catch(a){console.error("Logout error:",a),k.removeToken()}},getUserRole:()=>k.getUserRole(),getUserData:()=>k.getUserData(),getCurrentUser:()=>k.getCurrentUser()};var m=c(42378);let n=(0,e.createContext)(void 0);function o({children:a}){let[b,c]=(0,e.useState)(!1),[f,g]=(0,e.useState)(null),[h,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),[o,p]=(0,e.useState)(null),[q,r]=(0,e.useState)(null);(0,e.useRef)(null);let s=(0,m.useRouter)(),t=async(a,b)=>{i(!0);try{let d=await l.login({username:a,password:b});g(d.token),c(!0);let e=l.getUserRole(),f=l.getUserData(),h=l.getCurrentUser();k(e),p(f),r(h)}catch(a){throw a}finally{i(!1)}},u=async()=>{try{await l.logout(),g(null),c(!1),k(null),p(null),r(null),s.replace("/login")}catch(a){throw g(null),c(!1),k(null),p(null),a}};return(0,d.jsx)(n.Provider,{value:{isAuthenticated:b,token:f,login:t,logout:u,isLoading:h,userRole:j,userData:o,currentUser:q},children:a})}function p(){let a=(0,e.useContext)(n);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}},10177:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>l,metadata:()=>k});var d=c(75338),e=c(81883),f=c.n(e),g=c(13135),h=c.n(g);c(82704),c(87347);var i=c(44327),j=c(99174);let k={title:"Sales Dashboard",description:"Modern sales dashboard with login",viewport:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"};function l({children:a}){return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased min-h-screen`,children:(0,d.jsx)(i.ThemeProvider,{defaultTheme:"system",children:(0,d.jsx)(j.AuthProvider,{children:a})})})})}},23329:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},25196:(a,b,c)=>{Promise.resolve().then(c.bind(c,99174)),Promise.resolve().then(c.bind(c,44327))},44327:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/apple/Desktop/Projects/October/GajkesariSales-Oct23/components/theme-provider.tsx","ThemeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/apple/Desktop/Projects/October/GajkesariSales-Oct23/components/theme-provider.tsx","useTheme")},46055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},64385:(a,b,c)=>{"use strict";c.d(b,{D:()=>h,ThemeProvider:()=>g});var d=c(21124),e=c(38301);let f=(0,e.createContext)({theme:"system",setTheme:()=>null});function g({children:a,defaultTheme:b="system",storageKey:c="ui-theme",...g}){let[h,i]=(0,e.useState)(b);return(0,d.jsx)(f.Provider,{...g,value:{theme:h,setTheme:a=>{localStorage.setItem(c,a),i(a)}},children:a})}let h=()=>{let a=(0,e.useContext)(f);if(void 0===a)throw Error("useTheme must be used within a ThemeProvider");return a}},82704:()=>{},87347:()=>{},88748:(a,b,c)=>{Promise.resolve().then(c.bind(c,5561)),Promise.resolve().then(c.bind(c,64385))},99174:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/apple/Desktop/Projects/October/GajkesariSales-Oct23/components/auth-provider.tsx","AuthProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/apple/Desktop/Projects/October/GajkesariSales-Oct23/components/auth-provider.tsx","useAuth")}};