"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1913],{7220:(e,t,a)=>{a.d(t,{Hr:()=>f,Ht:()=>g,SQ:()=>c,_2:()=>u,hO:()=>m,lp:()=>p,mB:()=>x,rI:()=>i,ty:()=>d});var o=a(95155);a(12115);var r=a(47971),n=a(5917),s=a(99051),l=a(25016);function i(e){let{...t}=e;return(0,o.jsx)(r.bL,{"data-slot":"dropdown-menu",...t})}function d(e){let{...t}=e;return(0,o.jsx)(r.l9,{"data-slot":"dropdown-menu-trigger",...t})}function c(e){let{className:t,sideOffset:a=4,...n}=e;return(0,o.jsx)(r.ZL,{children:(0,o.jsx)(r.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function u(e){let{className:t,inset:a,variant:n="default",...s}=e;return(0,o.jsx)(r.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":n,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function m(e){let{className:t,children:a,checked:s,...i}=e;return(0,o.jsxs)(r.H_,{"data-slot":"dropdown-menu-checkbox-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),checked:s,...i,children:[(0,o.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,o.jsx)(r.VF,{children:(0,o.jsx)(n.A,{className:"size-4"})})}),a]})}function f(e){let{...t}=e;return(0,o.jsx)(r.z6,{"data-slot":"dropdown-menu-radio-group",...t})}function g(e){let{className:t,children:a,...n}=e;return(0,o.jsxs)(r.hN,{"data-slot":"dropdown-menu-radio-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[(0,o.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,o.jsx)(r.VF,{children:(0,o.jsx)(s.A,{className:"size-2 fill-current"})})}),a]})}function p(e){let{className:t,inset:a,...n}=e;return(0,o.jsx)(r.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,l.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function x(e){let{className:t,...a}=e;return(0,o.jsx)(r.wv,{"data-slot":"dropdown-menu-separator",className:(0,l.cn)("bg-border -mx-1 my-1 h-px",t),...a})}},31856:(e,t,a)=>{a.d(t,{CG:()=>c,Fm:()=>p,XW:()=>x,cj:()=>d,h:()=>g,qp:()=>h});var o=a(95155),r=a(12115),n=a(89511),s=a(83101),l=a(65229),i=a(25016);let d=n.bL,c=n.l9;n.bm;let u=n.ZL,m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,o.jsx)(n.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});m.displayName=n.hJ.displayName;let f=(0,s.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),g=r.forwardRef((e,t)=>{let{side:a="right",className:r,children:s,...d}=e;return(0,o.jsxs)(u,{children:[(0,o.jsx)(m,{}),(0,o.jsxs)(n.UC,{ref:t,className:(0,i.cn)(f({side:a}),r),...d,children:[s,(0,o.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,o.jsx)(l.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=n.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};p.displayName="SheetHeader";let x=e=>{let{className:t,...a}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="SheetFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,o.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold text-foreground",a),...r})});h.displayName=n.hE.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,o.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})}).displayName=n.VY.displayName},54679:(e,t,a)=>{a.d(t,{Cf:()=>u,Es:()=>f,L3:()=>g,ZJ:()=>d,c7:()=>m,lG:()=>l,rr:()=>p,zM:()=>i});var o=a(95155);a(12115);var r=a(89511),n=a(65229),s=a(25016);function l(e){let{...t}=e;return(0,o.jsx)(r.bL,{"data-slot":"dialog",...t})}function i(e){let{...t}=e;return(0,o.jsx)(r.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,o.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,o.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,s.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,showCloseButton:l=!0,...i}=e;return(0,o.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,o.jsx)(c,{}),(0,o.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,s.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:[a,l&&(0,o.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,o.jsx)(n.A,{}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...a}=e;return(0,o.jsx)("div",{"data-slot":"dialog-header",className:(0,s.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function f(e){let{className:t,...a}=e;return(0,o.jsx)("div",{"data-slot":"dialog-footer",className:(0,s.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function g(e){let{className:t,...a}=e;return(0,o.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,s.cn)("text-lg leading-none font-semibold",t),...a})}function p(e){let{className:t,...a}=e;return(0,o.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}},56069:(e,t,a)=>{a.d(t,{AuthProvider:()=>g,A:()=>p});var o=a(95155),r=a(12115);let n="https://api.gajkesaristeels.in",s="".concat(n,"/user/token"),l="".concat(n,"/user/logout"),i="".concat(n,"/user/manage/get"),d="".concat(n,"/user/manage/current-user"),c={getToken:()=>localStorage.getItem("authToken"),setToken:e=>{{localStorage.setItem("authToken",e);let t="localhost"===window.location.hostname?"authToken=".concat(e,"; path=/; max-age=86400; samesite=strict"):"authToken=".concat(e,"; path=/; max-age=86400; secure; samesite=strict");document.cookie=t}},removeToken:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("currentUser"),document.cookie="authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},getAuthHeader:()=>{let e=c.getToken();return e?"Bearer ".concat(e):null},setUserRole:e=>{localStorage.setItem("userRole",e.roles),localStorage.setItem("userData",JSON.stringify(e))},getUserRole:()=>localStorage.getItem("userRole"),getUserData:()=>{{let e=localStorage.getItem("userData");return e?JSON.parse(e):null}},setCurrentUser:e=>{localStorage.setItem("currentUser",JSON.stringify(e))},getCurrentUser:()=>{{let e=localStorage.getItem("currentUser");return e?JSON.parse(e):null}}},u={login:async e=>{try{let t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.text();throw Error("Login failed: ".concat(t.status," ").concat(e))}let[a,o]=(await t.text()).split(" ");if(!o)throw Error("Invalid response format from server");c.setToken(o);try{console.log("Fetching role for username:",e.username),console.log("Token being used:",o);let t=await fetch("".concat(i,"?username=").concat(e.username),{credentials:"include",method:"GET",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}});if(t.ok){let e=await t.json();c.setUserRole(e),console.log("User role data stored:",e)}else{console.warn("Failed to fetch user role data:",t.status,t.statusText);let e=await t.text();console.warn("Error response:",e)}}catch(e){console.warn("Error fetching user role data:",e)}try{let e=await fetch(d,{credentials:"include",method:"GET",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}});if(e.ok){let t=await e.json();c.setCurrentUser(t),console.log("Current user data stored:",t)}else console.warn("Failed to fetch current user data:",e.status)}catch(e){console.warn("Error fetching current user data:",e)}return{token:o,role:a||"USER"}}catch(e){throw console.error("Login error:",e),e}},logout:async()=>{try{let e=c.getToken();if(!e)return void c.removeToken();let t=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});c.removeToken(),t.ok||console.warn("Logout request failed, but token was cleared locally")}catch(e){console.error("Logout error:",e),c.removeToken()}},getStoredToken:()=>c.getToken(),getUserRole:()=>c.getUserRole(),getUserData:()=>c.getUserData(),getCurrentUser:()=>c.getCurrentUser()};var m=a(20063);let f=(0,r.createContext)(void 0);function g(e){let{children:t}=e,[a,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(!0),[c,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),[h,v]=(0,r.useState)(null),b=(0,r.useRef)(null),w=(0,m.useRouter)(),y=e=>{if(!e)return null;let t=e.split(".");if(t.length<2)return null;try{let e=t[1].replace(/-/g,"+").replace(/_/g,"/");if("function"!=typeof atob)return null;let a=atob(e),o=JSON.parse(a);if("number"==typeof o.exp)return o.exp;return null}catch(e){return null}};(0,r.useEffect)(()=>{let e=u.getStoredToken(),t=u.getUserRole(),a=u.getUserData(),o=u.getCurrentUser();if(e){let r=y(e),s=Math.floor(Date.now()/1e3);r&&r<=s?u.logout().finally(()=>{l(null),n(!1),g(null),x(null),v(null),w.replace("/login")}):(l(e),n(!0),g(t),x(a),v(o))}d(!1)},[]);let j=async(e,t)=>{d(!0);try{let a=await u.login({username:e,password:t});l(a.token),n(!0);let o=u.getUserRole(),r=u.getUserData(),s=u.getCurrentUser();g(o),x(r),v(s)}catch(e){throw e}finally{d(!1)}},N=async()=>{try{await u.logout(),l(null),n(!1),g(null),x(null),v(null),w.replace("/login")}catch(e){throw l(null),n(!1),g(null),x(null),e}};return(0,r.useEffect)(()=>{if(b.current&&(clearTimeout(b.current),b.current=null),!s)return;let e=y(s);if(!e)return;let t=1e3*e-Date.now();return t<=0?void N():(b.current=setTimeout(()=>{N()},t),()=>{b.current&&(clearTimeout(b.current),b.current=null)})},[s]),(0,o.jsx)(f.Provider,{value:{isAuthenticated:a,token:s,login:j,logout:N,isLoading:i,userRole:c,userData:p,currentUser:h},children:t})}function p(){let e=(0,r.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},90235:(e,t,a)=>{a.d(t,{J:()=>s});var o=a(95155);a(12115);var r=a(10489),n=a(25016);function s(e){let{className:t,...a}=e;return(0,o.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}}}]);