"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6454],{26983:(e,t,r)=>{r.d(t,{A:()=>n});let n=(0,r(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},35626:(e,t,r)=>{r.d(t,{A:()=>n});let n=(0,r(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},55725:(e,t,r)=>{r.d(t,{V:()=>p});var n=r(3648),a=r(95155),o=r(12115),l=r(90368),s=r(27937),u=r(24033),c=r(74854),d=r(51352),i=r(25016),g=r(97003);function m(){let e=(0,n._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return m=function(){return e},e}function f(){let e=(0,n._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return f=function(){return e},e}function p(e){let{className:t,classNames:r,showOutsideDays:n=!0,captionLayout:o="label",buttonVariant:p="ghost",formatters:x,components:w,...y}=e,b=(0,c.a)();return(0,a.jsx)(d.h,{showOutsideDays:n,className:(0,i.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(m()),String.raw(f()),t),captionLayout:o,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...x},classNames:{root:(0,i.cn)("w-fit",b.root),months:(0,i.cn)("flex gap-4 flex-col md:flex-row relative",b.months),month:(0,i.cn)("flex flex-col w-full gap-4",b.month),nav:(0,i.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",b.nav),button_previous:(0,i.cn)((0,g.r)({variant:p}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",b.button_previous),button_next:(0,i.cn)((0,g.r)({variant:p}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",b.button_next),month_caption:(0,i.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",b.month_caption),dropdowns:(0,i.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",b.dropdowns),dropdown_root:(0,i.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",b.dropdown_root),dropdown:(0,i.cn)("absolute bg-popover inset-0 opacity-0",b.dropdown),caption_label:(0,i.cn)("select-none font-medium","label"===o?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",b.caption_label),table:"w-full border-collapse",weekdays:(0,i.cn)("flex",b.weekdays),weekday:(0,i.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",b.weekday),week:(0,i.cn)("flex w-full mt-2",b.week),week_number_header:(0,i.cn)("select-none w-(--cell-size)",b.week_number_header),week_number:(0,i.cn)("text-[0.8rem] select-none text-muted-foreground",b.week_number),day:(0,i.cn)("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",b.day),range_start:(0,i.cn)("rounded-l-md bg-accent",b.range_start),range_middle:(0,i.cn)("rounded-none",b.range_middle),range_end:(0,i.cn)("rounded-r-md bg-accent",b.range_end),today:(0,i.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",b.today),outside:(0,i.cn)("text-muted-foreground aria-selected:text-muted-foreground",b.outside),disabled:(0,i.cn)("text-muted-foreground opacity-50",b.disabled),hidden:(0,i.cn)("invisible",b.hidden),...r},components:{Root:e=>{let{className:t,rootRef:r,...n}=e;return(0,a.jsx)("div",{"data-slot":"calendar",ref:r,className:(0,i.cn)(t),...n})},Chevron:e=>{let{className:t,orientation:r,...n}=e;return"left"===r?(0,a.jsx)(l.A,{className:(0,i.cn)("size-4",t),...n}):"right"===r?(0,a.jsx)(s.A,{className:(0,i.cn)("size-4",t),...n}):(0,a.jsx)(u.A,{className:(0,i.cn)("size-4",t),...n})},DayButton:h,WeekNumber:e=>{let{children:t,...r}=e;return(0,a.jsx)("td",{...r,children:(0,a.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:t})})},...w},...y})}function h(e){let{className:t,day:r,modifiers:n,...l}=e,s=(0,c.a)(),u=o.useRef(null);return o.useEffect(()=>{var e;n.focused&&(null==(e=u.current)||e.focus())},[n.focused]),(0,a.jsx)(g.$,{ref:u,variant:"ghost",size:"icon","data-day":r.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:(0,i.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",s.day,t),...l})}},56069:(e,t,r)=>{r.d(t,{AuthProvider:()=>f,A:()=>p});var n=r(95155),a=r(12115);let o="https://api.gajkesaristeels.in",l="".concat(o,"/user/token"),s="".concat(o,"/user/logout"),u="".concat(o,"/user/manage/get"),c="".concat(o,"/user/manage/current-user"),d={getToken:()=>localStorage.getItem("authToken"),setToken:e=>{{localStorage.setItem("authToken",e);let t="localhost"===window.location.hostname?"authToken=".concat(e,"; path=/; max-age=86400; samesite=strict"):"authToken=".concat(e,"; path=/; max-age=86400; secure; samesite=strict");document.cookie=t}},removeToken:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("currentUser"),document.cookie="authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},getAuthHeader:()=>{let e=d.getToken();return e?"Bearer ".concat(e):null},setUserRole:e=>{localStorage.setItem("userRole",e.roles),localStorage.setItem("userData",JSON.stringify(e))},getUserRole:()=>localStorage.getItem("userRole"),getUserData:()=>{{let e=localStorage.getItem("userData");return e?JSON.parse(e):null}},setCurrentUser:e=>{localStorage.setItem("currentUser",JSON.stringify(e))},getCurrentUser:()=>{{let e=localStorage.getItem("currentUser");return e?JSON.parse(e):null}}},i={login:async e=>{try{let t=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.text();throw Error("Login failed: ".concat(t.status," ").concat(e))}let[r,n]=(await t.text()).split(" ");if(!n)throw Error("Invalid response format from server");d.setToken(n);try{console.log("Fetching role for username:",e.username),console.log("Token being used:",n);let t=await fetch("".concat(u,"?username=").concat(e.username),{credentials:"include",method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(t.ok){let e=await t.json();d.setUserRole(e),console.log("User role data stored:",e)}else{console.warn("Failed to fetch user role data:",t.status,t.statusText);let e=await t.text();console.warn("Error response:",e)}}catch(e){console.warn("Error fetching user role data:",e)}try{let e=await fetch(c,{credentials:"include",method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(e.ok){let t=await e.json();d.setCurrentUser(t),console.log("Current user data stored:",t)}else console.warn("Failed to fetch current user data:",e.status)}catch(e){console.warn("Error fetching current user data:",e)}return{token:n,role:r||"USER"}}catch(e){throw console.error("Login error:",e),e}},logout:async()=>{try{let e=d.getToken();if(!e)return void d.removeToken();let t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});d.removeToken(),t.ok||console.warn("Logout request failed, but token was cleared locally")}catch(e){console.error("Logout error:",e),d.removeToken()}},getStoredToken:()=>d.getToken(),getUserRole:()=>d.getUserRole(),getUserData:()=>d.getUserData(),getCurrentUser:()=>d.getCurrentUser()};var g=r(20063);let m=(0,a.createContext)(void 0);function f(e){let{children:t}=e,[r,o]=(0,a.useState)(!1),[l,s]=(0,a.useState)(null),[u,c]=(0,a.useState)(!0),[d,f]=(0,a.useState)(null),[p,h]=(0,a.useState)(null),[x,w]=(0,a.useState)(null),y=(0,a.useRef)(null),b=(0,g.useRouter)(),k=e=>{if(!e)return null;let t=e.split(".");if(t.length<2)return null;try{let e=t[1].replace(/-/g,"+").replace(/_/g,"/");if("function"!=typeof atob)return null;let r=atob(e),n=JSON.parse(r);if("number"==typeof n.exp)return n.exp;return null}catch(e){return null}};(0,a.useEffect)(()=>{let e=i.getStoredToken(),t=i.getUserRole(),r=i.getUserData(),n=i.getCurrentUser();if(e){let a=k(e),l=Math.floor(Date.now()/1e3);a&&a<=l?i.logout().finally(()=>{s(null),o(!1),f(null),h(null),w(null),b.replace("/login")}):(s(e),o(!0),f(t),h(r),w(n))}c(!1)},[]);let v=async(e,t)=>{c(!0);try{let r=await i.login({username:e,password:t});s(r.token),o(!0);let n=i.getUserRole(),a=i.getUserData(),l=i.getCurrentUser();f(n),h(a),w(l)}catch(e){throw e}finally{c(!1)}},_=async()=>{try{await i.logout(),s(null),o(!1),f(null),h(null),w(null),b.replace("/login")}catch(e){throw s(null),o(!1),f(null),h(null),e}};return(0,a.useEffect)(()=>{if(y.current&&(clearTimeout(y.current),y.current=null),!l)return;let e=k(l);if(!e)return;let t=1e3*e-Date.now();return t<=0?void _():(y.current=setTimeout(()=>{_()},t),()=>{y.current&&(clearTimeout(y.current),y.current=null)})},[l]),(0,n.jsx)(m.Provider,{value:{isAuthenticated:r,token:l,login:v,logout:_,isLoading:u,userRole:d,userData:p,currentUser:x},children:t})}function p(){let e=(0,a.useContext)(m);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}}]);