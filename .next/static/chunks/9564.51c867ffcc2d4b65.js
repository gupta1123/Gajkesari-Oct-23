(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9564],{35603:()=>{},79564:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var r=n(95155),l=n(12115);let s=(0,l.createContext)(null);function a(){let e=(0,l.use)(s);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var i=n(55027),o=n.n(i);let c=(0,l.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:a,id:o,placeholder:c,style:u,whenReady:d,zoom:f,...m},p){let[x]=(0,l.useState)({className:a,id:o,style:u}),[h,g]=(0,l.useState)(null),b=(0,l.useRef)(void 0);(0,l.useImperativeHandle)(p,()=>h?.map??null,[h]);let v=(0,l.useCallback)(r=>{if(null!==r&&!b.current){let l=new i.Map(r,m);b.current=l,null!=n&&null!=f?l.setView(n,f):null!=e&&l.fitBounds(e,t),null!=d&&l.whenReady(d),g(Object.freeze({__version:1,map:l}))}},[]);(0,l.useEffect)(()=>()=>{h?.map.remove()},[h]);let y=h?l.createElement(s,{value:h},r):c??null;return l.createElement("div",{...x,ref:v},y)});var u=n(47650);function d(e,t){let n=(0,l.useRef)(t);(0,l.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function f(e,t){let n=(0,l.useRef)(void 0);(0,l.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function m(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function p(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function x(e,t){return null==t?function(t,n){let r=(0,l.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let s=(0,l.useRef)(void 0);s.current||(s.current=e(n,r));let a=(0,l.useRef)(n),{instance:i}=s.current;return(0,l.useEffect)(function(){a.current!==n&&(t(i,n,a.current),a.current=n)},[i,n,t]),s}}function h(e){return function(t){var n;let r=a(),s=e(m(t,r),r);return d(r.map,t.attribution),f(s.current,t.eventHandlers),n=s.current,(0,l.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),s}}let g=function(e,t){var n;return n=h(x(e,t)),(0,l.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,l.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return p(new i.TileLayer(e,m(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:l}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=l&&l!==n.zIndex&&e.setZIndex(l);let{url:s}=t;null!=s&&s!==n.url&&e.setUrl(s)}),b=function(e,t){var n;return n=h(x(e,t)),(0,l.forwardRef)(function(e,t){let{instance:r,context:a}=n(e).current;(0,l.useImperativeHandle)(t,()=>r);let{children:i}=e;return null==i?null:l.createElement(s,{value:a},i)})}(function({position:e,...t},n){var r;let l=new i.Marker(e,t);return p(l,(r={overlayContainer:l},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),v=function(e,t){var n,r;return n=x(e),r=function(e,r){let l=a(),s=n(m(e,l),l);return d(l.map,e.attribution),f(s.current,e.eventHandlers),t(s.current,l,e,r),s},(0,l.forwardRef)(function(e,t){let[n,s]=(0,l.useState)(!1),{instance:a}=r(e,s).current;(0,l.useImperativeHandle)(t,()=>a),(0,l.useEffect)(function(){n&&a.update()},[a,n,e.children]);let i=a._contentNode;return i?(0,u.createPortal)(e.children,i):null})}(function(e,t){return p(new i.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,l.useEffect)(function(){let{instance:l}=e;function s(e){e.popup===l&&(l.update(),r(!0))}function a(e){e.popup===l&&r(!1)}return t.map.on({popupopen:s,popupclose:a}),null==t.overlayContainer?(null!=n&&l.setLatLng(n),l.openOn(t.map)):t.overlayContainer.bindPopup(l),function(){t.map.off({popupopen:s,popupclose:a}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(l)}},[e,t,r,n])});n(35603),delete o().Icon.Default.prototype._getIconUrl,o().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});let y=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#6366f1","#14b8a6","#a855f7","#e11d48","#0ea5e9","#22c55e","#facc15"],j=e=>e?e.listId?e.listId:e.id?e.id:e.location?e.location:String(e):null,w=e=>{let{center:t,zoom:n}=e,r=a().map;return(0,l.useEffect)(()=>{try{r.flyTo(t,n,{duration:.8})}catch(e){}},[t[0],t[1],n]),null},N=(0,l.memo)(e=>{let{center:t,zoom:n,highlightedEmployee:s,markers:a=[],onMarkerClick:i}=e,[u,d]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{d(!0)},[]),u)?(0,r.jsxs)(c,{center:t,zoom:n,style:{height:"100%",width:"100%"},className:"rounded-xl",children:[(0,r.jsx)(w,{center:t,zoom:n}),(0,r.jsx)(g,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}),a.map(e=>{let t=e.type||"live",n=(e=>y[("string"==typeof e?parseInt(e):e)%y.length])(e.employeeId||e.id),l=((e,t)=>{let n="house"===t?"36px":"40px";return o().divIcon({className:"custom-marker",html:'<div style="\n      background-color: '.concat(e,";\n      width: ").concat(n,";\n      height: ").concat(n,";\n      border-radius: ").concat("square"==("house"===t?"square":"circle")?"8px":"50%",';\n      border: 3px solid white;\n      box-shadow: 0 4px 8px rgba(0,0,0,0.4);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      font-size: 16px;\n      cursor: pointer;\n      touch-action: manipulation;\n    ">\n      ').concat("house"===t?"\uD83C\uDFE0":"visit"===t?"\uD83D\uDCCD":"\uD83D\uDC64","\n    </div>"),iconSize:"house"===t?[36,36]:[40,40],iconAnchor:"house"===t?[18,18]:[20,20]})})(n,t);return(0,r.jsx)(b,{position:[e.lat,e.lng],icon:l,eventHandlers:i?{click:()=>i(e)}:void 0,children:(0,r.jsx)(v,{children:(0,r.jsx)("div",{className:"min-w-[280px] max-w-[320px] sm:min-w-[300px] sm:max-w-[350px]",children:"visit"===t?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:n}}),(0,r.jsx)("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:e.name||"Visit"})]}),e.tooltipLines&&e.tooltipLines.length>0&&(0,r.jsx)("div",{className:"space-y-2",children:e.tooltipLines.map((e,t)=>{let[n,l]=e.split(": ");return(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-1 sm:gap-2",children:[(0,r.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-gray-600 sm:min-w-[80px]",children:[n,":"]}),(0,r.jsx)("span",{className:"text-xs sm:text-sm text-gray-800 sm:text-right break-words",children:l})]},t)})}),(0,r.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[(0,r.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs sm:text-sm font-medium text-white",style:{backgroundColor:n},children:"Visit Location"}),e.subtitle&&(0,r.jsx)("span",{className:"text-xs sm:text-sm text-gray-500 break-words",children:e.subtitle})]})})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-sm sm:text-base font-semibold",children:e.name||"Employee"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[(0,r.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs sm:text-sm font-medium text-white",style:{backgroundColor:n},children:"live"===t?"Live location":"house"===t?"Home location":"Location"}),e.subtitle&&(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-muted-foreground break-words",children:["live"===t?"Updated: ":"",e.subtitle]})]}),e.tooltipLines&&e.tooltipLines.length>0&&(0,r.jsx)("div",{className:"mt-2 space-y-1",children:e.tooltipLines.map((e,t)=>(0,r.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground break-words",children:e},t))})]})})})},String(e.id))})]}):(0,r.jsx)("div",{className:"h-full w-full bg-gray-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-gray-500",children:"Loading map..."})})},(e,t)=>e.zoom===t.zoom&&e.center[0]===t.center[0]&&e.center[1]===t.center[1]&&j(e.highlightedEmployee)===j(t.highlightedEmployee));N.displayName="LeafletMap";let L=N}}]);