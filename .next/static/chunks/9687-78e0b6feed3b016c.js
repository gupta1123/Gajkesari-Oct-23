"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9687],{25016:(e,t,a)=>{a.d(t,{$:()=>l,V5:()=>u,cn:()=>d,hI:()=>y});var n=a(2821),s=a(75889),r=a(71163),o=a(26467),i=a(35504),c=a(92365);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,n.$)(t))}function l(e){if(!e)return"";try{let[t,a]=e.split(":"),n=new Date;return n.setHours(parseInt(t,10),parseInt(a,10),0,0),(0,r.GP)(n,"h:mm a")}catch(t){return console.error("Error formatting time:",t),e}}function u(e){if(!e)return"";try{let t=(0,o.H)(e);if((0,i.c)(t))return"Today";if((0,c.P)(t))return"Yesterday";return(0,r.GP)(t,"dd MMM yyyy")}catch(t){return console.error("Error formatting date:",t),e}}function y(e){if(!e)return"";try{let t;if(e.includes("T"))t=(0,o.H)(e);else{let a=e.split(" ");if(a.length>=2){let e=a[0],n=a[1],[s,r,o]=e.split("-").map(Number),[i,c]=n.split(":").map(Number);t=new Date(s,r-1,o,i,c)}else t=(0,o.H)(e)}let a=u((0,r.GP)(t,"yyyy-MM-dd")),n=l((0,r.GP)(t,"HH:mm"));return"".concat(a," ").concat(n)}catch(t){return console.error("Error formatting last updated:",t),e}}},37621:(e,t,a)=>{a.d(t,{K:()=>s,n:()=>n});class n{async checkConnectivity(){try{return(await fetch("".concat(this.baseUrl,"/health"),{method:"GET",headers:{"Content-Type":"application/json"}})).ok}catch(e){return console.error("\uD83C\uDF10 Connectivity check failed:",e),!1}}static async getEmployees(){return s.getAllEmployees()}static async getReportCounts(e,t){return s.getReportCounts(e,t)}static async getAttendanceByDate(e){return s.getAttendanceForRange(e,e)}static async getVisitsByDateSorted(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"visitDate,desc",o=arguments.length>5?arguments[5]:void 0;return s.getVisitsByDateSorted(e,t,a,n,r,o)}static async getVisitsForTeam(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"visitDate,desc",i=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0;return s.getVisitsForTeam(e,t,a,n,r,o,i,c,d)}static async createNote(e){return s.createNote(e)}static async getAllNotes(){return s.getAllNotes()}static async getStoresFiltered(e){return s.getStoresFiltered(e)}static async getStoresFilteredPaginated(e){return s.getStoresFilteredPaginated(e)}static async getStoresByEmployee(e,t){return s.getStoresByEmployee(e,t)}static async deleteStore(e){return s.deleteStore(e)}static async exportStores(){return s.exportStores()}static async getAllEmployees(){return s.getAllEmployees()}static async getEmployeeById(e){return s.getEmployeeById(e)}static async getTeamByEmployee(e){return s.getTeamByEmployee(e)}static async getCities(){return s.getCities()}static async getAllInactiveEmployees(){return s.getAllInactiveEmployees()}static async createEmployee(e){return s.createEmployee(e)}static async updateEmployee(e,t){return s.updateEmployee(e,t)}static async deleteEmployee(e){return s.deleteEmployee(e)}static async resetPassword(e,t){return s.resetPassword(e,t)}static async editUsername(e,t){return s.editUsername(e,t)}static async setEmployeeActive(e){return s.setEmployeeActive(e)}static async getEmployeeStatsByDateRange(e,t,a){return s.getEmployeeStatsByDateRange(e,t,a)}static async getEmployeeStatsWithVisits(e,t,a){return s.getEmployeeStatsWithVisits(e,t,a)}static async getEmployeeLiveLocation(e){return s.getEmployeeLiveLocation(e)}static async getAllEmployeeLocations(){return s.getAllEmployeeLocations()}static async createAttendanceLog(e){return s.createAttendanceLog(e)}static async getCurrentUser(){return s.getCurrentUser()}static async getStoresForTeam(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return s.getStoresForTeam(e,t,a)}async loadToken(){this.token=localStorage.getItem("authToken")}async getHeaders(){await this.loadToken();let e={"Content-Type":"application/json"};return this.token&&(e.Authorization="Bearer ".concat(this.token)),e}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n="".concat(this.baseUrl).concat(e),s=await this.getHeaders(),r={...t,headers:{...s,...t.headers}};console.log("\uD83C\uDF10 Making API request:",{url:n,method:r.method||"GET",headers:r.headers,hasToken:!!this.token});try{let t=await fetch(n,r),a=t.headers.get("content-type")||"";if(!t.ok){let e="";try{if(a.includes("application/json")){let a=await t.json();e="string"==typeof a?a:JSON.stringify(a)}else e=await t.text()}catch(e){}let n=e?" Body: ".concat(e.slice(0,200)):"";throw Error("API request failed: ".concat(t.status," ").concat(t.statusText,".").concat(n))}if(204===t.status)return;if(!a||!a.toLowerCase().includes("application/json")){let s=await t.text();if(["/monthly-sale/getByVisit","/intent-audit/getByVisit","/task/getByVisit","/notes/getByVisit"].some(t=>e.includes(t))&&t.ok)return console.warn("Non-JSON response from ".concat(e,", returning empty array. Response: ").concat(s.slice(0,200))),[];if(["/employee-user/create","/attendance-log/createAttendanceLog"].some(t=>e.includes(t))&&t.ok)return console.log("Success response from ".concat(e,": ").concat(s)),{success:!0,message:s};let r=s.slice(0,200);throw Error("Expected JSON but received '".concat(a||"unknown","' from ").concat(n,". Body starts with: ").concat(r))}return await t.json()}catch(s){if(console.error("\uD83D\uDEA8 API request failed for ".concat(e,":"),s),console.error("\uD83C\uDF10 Request details:",{url:n,method:r.method||"GET",hasToken:!!this.token,tokenPreview:this.token?"".concat(this.token.substring(0,20),"..."):"No token"}),s instanceof TypeError&&"Failed to fetch"===s.message){if(console.error("\uD83C\uDF10 Network Error Details:",{url:n,baseUrl:this.baseUrl,error:s.message,retryCount:a,possibleCauses:["CORS policy blocking the request","API server is down or unreachable","Network connectivity issues","Invalid URL or endpoint","Authentication token expired or invalid"]}),a<2)return console.log("\uD83D\uDD04 Retrying request (attempt ".concat(a+1,"/2)...")),await new Promise(e=>setTimeout(e,1e3*(a+1))),this.makeRequest(e,t,a+1);throw Error("Network error: Unable to connect to API server at ".concat(this.baseUrl,". This could be due to:\n- API server is down or unreachable\n- Network connectivity issues\n- CORS policy blocking the request\n- Authentication token expired\n\nPlease check your internet connection and try again."))}throw s}}async updateEmployeeLiveLocation(e,t,a){return this.makeRequest("/employee/updateLiveLocation?id=".concat(e,"&latitude=").concat(t,"&longitude=").concat(a),{method:"PUT"})}async getAllVisits(){return this.makeRequest("/visit/getAll")}async getVisitsByEmployee(e){return this.makeRequest("/visit/getByEmployee?employeeId=".concat(e))}async getVisitsByDateRange(e,t){return this.makeRequest("/visit/getByDateRange?start=".concat(e,"&end=").concat(t))}async getVisitsByEmployeeAndDateRange(e,t,a){return this.makeRequest("/visit/getByEmployeeAndDateRange?employeeId=".concat(e,"&start=").concat(t,"&end=").concat(a))}async getEmployeeStatsByDateRange(e,t,a){return this.makeRequest("/visit/getByDateRangeAndEmployeeStats?id=".concat(e,"&start=").concat(t,"&end=").concat(a))}async getEmployeeStatsWithVisits(e,t,a){return this.getEmployeeStatsByDateRange(e,t,a)}async getVisitsByDateSorted(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"visitDate,desc",r=arguments.length>5?arguments[5]:void 0,o="/visit/getByDateSorted?startDate=".concat(e,"&endDate=").concat(t,"&page=").concat(a,"&size=").concat(n,"&sort=").concat(s);return r&&""!==r.trim()&&(o+="&storeName=".concat(encodeURIComponent(r.trim()))),console.log("API URL:","".concat(this.baseUrl).concat(o)),this.makeRequest(o)}async getVisitsForTeam(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"visitDate,desc",o=arguments.length>6?arguments[6]:void 0,i=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,d="/visit/getForTeam?teamId=".concat(e,"&startDate=").concat(t,"&endDate=").concat(a,"&page=").concat(n,"&size=").concat(s,"&sort=").concat(r);return o&&""!==o.trim()&&(d+="&purpose=".concat(encodeURIComponent(o.trim()))),i&&""!==i.trim()&&(d+="&priority=".concat(encodeURIComponent(i.trim()))),c&&""!==c.trim()&&(d+="&storeName=".concat(encodeURIComponent(c.trim()))),console.log("Team API URL:","".concat(this.baseUrl).concat(d)),this.makeRequest(d)}async getVisitById(e){return this.makeRequest("/visit/getById?id=".concat(e))}async getVisitProCons(e){return this.makeRequest("/visit/getProCons?visitId=".concat(e))}async addBrandProCons(e,t){return this.makeRequest("/visit/addProCons?visitId=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteBrandProCons(e,t){return this.makeRequest("/visit/deleteProCons?visitId=".concat(e),{method:"POST",body:JSON.stringify(t)})}async getIntentAuditByVisit(e){return this.makeRequest("/intent-audit/getByVisit?id=".concat(e))}async getMonthlySaleByVisit(e){return this.makeRequest("/monthly-sale/getByVisit?visitId=".concat(e))}async getTasksByVisit(e,t){return this.makeRequest("/task/getByVisit?type=".concat(e,"&visitId=").concat(t))}async getVisitsByStore(e){return this.makeRequest("/visit/getByStore?id=".concat(e))}async getNotesByStore(e){return this.makeRequest("/notes/getByStore?id=".concat(e))}async getNotesByVisit(e){return this.makeRequest("/notes/getByVisit?id=".concat(e))}async createNote(e){return this.makeRequest("/notes/create",{method:"POST",body:JSON.stringify(e)})}async getAllNotes(){return this.makeRequest("/notes/getAll")}async updateNote(e,t){return this.makeRequest("/notes/edit?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteNote(e){return this.makeRequest("/notes/delete?id=".concat(e),{method:"DELETE"})}async getAttendanceForRange(e,t){return this.makeRequest("/attendance-log/getForRange1?start=".concat(e,"&end=").concat(t))}async getAttendanceStatsForRange(e,t){return this.makeRequest("/attendance-log/getForRange?start=".concat(e,"&end=").concat(t))}async getAttendanceForEmployeeAndRange(e,t,a){return this.makeRequest("/attendance-log/getForEmployeeAndRange?employeeId=".concat(e,"&start=").concat(t,"&end=").concat(a))}async getReportCounts(e,t){return this.makeRequest("/report/getCounts?startDate=".concat(e,"&endDate=").concat(t))}async getExpensesByDateRange(e,t){return this.makeRequest("/expense/getByDateRange?start=".concat(e,"&end=").concat(t))}async getStoresFiltered(e){let t=new URLSearchParams;e.storeName&&t.append("storeName",e.storeName),e.ownerName&&t.append("clientName",e.ownerName),e.city&&"all"!==e.city&&t.append("city",e.city),e.state&&"all"!==e.state&&t.append("state",e.state),e.clientType&&"all"!==e.clientType&&t.append("clientType",e.clientType),void 0!==e.page&&t.append("page",e.page.toString()),void 0!==e.size&&t.append("size",e.size.toString());let a=e.sortBy||"storeName",n=e.sortOrder||"asc";return t.append("sortBy",a),t.append("sortOrder",n),(await this.makeRequest("/store/filteredValues?".concat(t.toString()))).content}async getStoresFilteredPaginated(e){let t=new URLSearchParams;if(e.storeName&&t.append("storeName",e.storeName),e.ownerName&&t.append("clientName",e.ownerName),e.city&&t.append("city",e.city),e.state&&t.append("state",e.state),e.clientType&&t.append("clientType",e.clientType),e.employeeName&&t.append("employeeName",e.employeeName),e.primaryContact){let a=e.primaryContact.replace(/\D/g,"");a&&t.append("primaryContact",a)}void 0!==e.page&&t.append("page",e.page.toString()),void 0!==e.size&&t.append("size",e.size.toString());let a=e.sortBy||"storeName",n=e.sortOrder||"asc";return t.append("sort","".concat(a,",").concat(n)),this.makeRequest("/store/filteredValues?".concat(t.toString()))}async getStoreById(e){return this.makeRequest("/store/getById?id=".concat(e))}async updateStore(e,t){return this.makeRequest("/store/edit?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async getStoresByEmployee(e,t){let a=new URLSearchParams;a.append("id",e.toString());let n=t.sortBy||"storeName",s=t.sortOrder||"asc";return a.append("sort","".concat(n,",").concat(s)),this.makeRequest("/store/getByEmployeeWithSort?".concat(a.toString()))}async deleteStore(e){return this.makeRequest("/store/deleteById?id=".concat(e),{method:"DELETE"})}async exportStores(){let e=await this.getHeaders(),t=await fetch("".concat(this.baseUrl,"/store/export"),{headers:e});if(!t.ok)throw Error("Export failed: ".concat(t.status," ").concat(t.statusText));return t.text()}async getDashboardData(e,t){let[a,n,s]=await Promise.all([this.getAllEmployees(),this.getVisitsByDateRange(e,t),this.getReportCounts(e,t)]);return{employees:a,visits:n,reportCounts:s}}async getEmployeeDashboardData(e,t,a){let[n,s,r]=await Promise.all([this.getEmployeeById(e),this.getVisitsByEmployeeAndDateRange(e,t,a),this.getAttendanceForEmployeeAndRange(e,t,a)]);return{employee:n,visits:s,attendanceStats:r}}async getAllEmployeeLocations(){return this.makeRequest("/employee/getAllLiveLocations")}async getEmployeeLiveLocation(e){return this.makeRequest("/employee/getLiveLocation?id=".concat(e))}async getTasksByStoreAndDate(e){let{storeId:t,start:a,end:n}=e;return this.makeRequest("/task/getByStoreAndDate?storeId=".concat(t,"&start=").concat(a,"&end=").concat(n))}async getSitesByStore(e){return this.makeRequest("/site/getByStore?id=".concat(e))}formatDate(e){return e.toISOString().split("T")[0]}formatDateRange(e,t){return{start:this.formatDate(e),end:this.formatDate(t)}}async getAllEmployees(){return this.makeRequest("/employee/getAll")}async getEmployeeById(e){return this.makeRequest("/employee/getById?id=".concat(e))}async getTeamByEmployee(e){return this.makeRequest("/employee/team/getbyEmployee?id=".concat(e))}async getCities(){return this.makeRequest("/employee/getCities")}async getAllInactiveEmployees(){return this.makeRequest("/employee/getAllInactive")}async createEmployee(e){return this.makeRequest("/employee-user/create",{method:"POST",body:JSON.stringify(e)})}async updateEmployee(e,t){return this.makeRequest("/employee/edit?empId=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteEmployee(e){return this.makeRequest("/employee/delete?id=".concat(e),{method:"PUT"})}async resetPassword(e,t){return this.makeRequest("/user/manage/update",{method:"PUT",body:JSON.stringify({username:e,password:t})})}async editUsername(e,t){return this.makeRequest("/employee/editUsername?id=".concat(e,"&username=").concat(t),{method:"PUT"})}async setEmployeeActive(e){return this.makeRequest("/employee/setActive?id=".concat(e),{method:"PUT"})}async createAttendanceLog(e){return this.makeRequest("/attendance-log/createAttendanceLog?employeeId=".concat(e),{method:"POST"})}async getCurrentUser(){return this.makeRequest("/user/manage/current-user")}async getStoresForTeam(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return this.makeRequest("/store/getForTeam?teamId=".concat(e,"&page=").concat(t,"&size=").concat(a))}constructor(){this.token=null,this.baseUrl="https://api.gajkesaristeels.in",this.loadToken()}}let s=new n},73344:(e,t,a)=>{a.d(t,{DW:()=>i,DZ:()=>d,EY:()=>l,eu:()=>c});var n=a(95155),s=a(12115),r=a(83101),o=a(25016);let i=(0,r.F)("font-semibold tracking-tight text-foreground",{variants:{size:{xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl"},weight:{normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"}},defaultVariants:{size:"lg",weight:"semibold"}}),c=(0,r.F)("text-foreground",{variants:{size:{xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg"},tone:{default:"text-foreground",muted:"text-muted-foreground",subtle:"text-muted-foreground/80"},weight:{normal:"font-normal",medium:"font-medium",semibold:"font-semibold"},tracking:{tight:"tracking-tight",normal:"tracking-normal",wide:"tracking-wide"}},defaultVariants:{size:"md",tone:"default",weight:"normal",tracking:"normal"}}),d=s.forwardRef((e,t)=>{let{className:a,size:s,weight:r,as:c="h2",...d}=e;return(0,n.jsx)(c,{ref:t,className:(0,o.cn)(i({size:s,weight:r}),a),...d})});d.displayName="Heading";let l=s.forwardRef((e,t)=>{let{className:a,size:s,tone:r,weight:i,tracking:d,as:l="p",...u}=e;return(0,n.jsx)(l,{ref:t,className:(0,o.cn)(c({size:s,tone:r,weight:i,tracking:d}),a),...u})});l.displayName="Text"},83209:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>l,ZB:()=>c,Zp:()=>o,aR:()=>i});var n=a(95155);a(12115);var s=a(25016),r=a(73344);function o(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)((0,r.DW)({size:"md"}),"leading-none",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)((0,r.eu)({size:"sm",tone:"muted"}),t),...a})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}},97003:(e,t,a)=>{a.d(t,{$:()=>c,r:()=>i});var n=a(95155);a(12115);var s=a(32467),r=a(83101),o=a(25016);let i=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a,size:r,asChild:c=!1,...d}=e,l=c?s.DX:"button";return(0,n.jsx)(l,{"data-slot":"button",className:(0,o.cn)(i({variant:a,size:r,className:t})),...d})}}}]);