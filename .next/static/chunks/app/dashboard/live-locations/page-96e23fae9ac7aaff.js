(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7209],{1150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let s=r(95155),a=r(12115),n=r(24437);function l(e){return{default:e&&"default"in e?e.default:e}}r(36552);let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},r=(0,a.lazy)(()=>t.loader().then(l)),d=t.loading;function c(e){let l=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?a.Suspense:a.Fragment,o=t.ssr?(0,s.jsxs)(s.Fragment,{children:[null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(c,{...i?{fallback:l}:{},children:o})}return c.displayName="LoadableComponent",c}},8567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return s.workAsyncStorageInstance}});let s=r(17828)},17828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return s}});let s=(0,r(64054).createAsyncLocalStorage)()},21873:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},24437:(e,t,r)=>{"use strict";function s(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}}),r(24553)},26983:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},35299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},36552:(e,t,r)=>{"use strict";function s(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}}),r(95155),r(47650),r(8567),r(77278)},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return i}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class s{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return a?new a:new s}function l(e){return a?a.bind(e):s.bind(e)}function i(){return a?a.snapshot():function(e,...t){return e(...t)}}},67812:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var s=r(95155);r(12115);var a=r(32467),n=r(83101),l=r(25016);let i=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,asChild:n=!1,...d}=e,c=n?a.DX:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,l.cn)(i({variant:r}),t),...d})}},67909:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(86278),a=r.n(s)},76561:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]])},76751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(95155),a=r(12115),n=r(83209),l=r(67812),i=r(97003),d=r(35299);let c=(0,r(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=r(91169),u=r(21873),m=r(26983),x=r(76561),h=r(67909),p=r(37621);let f=(0,h.default)(()=>Promise.all([r.e(4804),r.e(1761),r.e(9564)]).then(r.bind(r,79564)),{loadableGenerated:{webpack:()=>[79564]},ssr:!1}),g=()=>{let[e,t]=(0,a.useState)([]),[r,h]=(0,a.useState)(!0),[g,j]=(0,a.useState)(null),[v,b]=(0,a.useState)(!1),[y,N]=(0,a.useState)(null),w=localStorage.getItem("authToken"),k=(0,a.useCallback)(async()=>{if(!w)return void j("Authentication token not found. Please log in.");b(!0),j(null);try{let e=await p.K.getAllEmployeeLocations();t(Array.isArray(e)?e:[])}catch(e){j(e instanceof Error?e.message:"An unknown error occurred")}finally{b(!1),h(!1)}},[w]);(0,a.useEffect)(()=>{w&&k()},[k]),(0,a.useEffect)(()=>{if(!w)return;let e=setInterval(()=>{k()},3e4);return()=>clearInterval(e)},[k,w]);let A=e=>{try{let[t]=e.split(".");return t}catch(t){return e}},T=e=>{try{let t=new Date(e),r=String(t.getDate()).padStart(2,"0"),s=t.toLocaleString("en-GB",{month:"short"}),a=String(t.getFullYear()).slice(-2);return"".concat(r," ").concat(s," '").concat(a)}catch(t){return e}},_=(e,t)=>{try{let r=new Date("".concat(e,"T").concat(t)),s=new Date().getTime()-r.getTime(),a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return"".concat(a,"m ago");let n=Math.floor(a/60);if(n<24)return"".concat(n,"h ago");let l=Math.floor(n/24);return"".concat(l,"d ago")}catch(e){return"Unknown"}},M=(e,t)=>{try{let r=new Date("".concat(e,"T").concat(t)),s=new Date().getTime()-r.getTime(),a=Math.floor(s/6e4);if(a<=5)return"bg-green-100 text-green-800 border-green-200";if(a<=30)return"bg-yellow-100 text-yellow-800 border-yellow-200";return"bg-red-100 text-red-800 border-red-200"}catch(e){return"bg-gray-100 text-gray-800 border-gray-200"}},S=(e,t)=>{try{let r=new Date("".concat(e,"T").concat(t)),s=new Date().getTime()-r.getTime(),a=Math.floor(s/6e4);if(a<=5)return"Live";if(a<=30)return"Recent";return"Stale"}catch(e){return"Unknown"}},E=e.map(e=>({id:e.id,name:e.empName,lat:e.latitude,lng:e.longitude,subtitle:"".concat(T(e.updatedAt)," ").concat(A(e.updatedTime))}));return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(n.Zp,{className:"border-0 shadow-sm",children:[(0,s.jsx)(n.aR,{className:"pb-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.ZB,{className:"text-xl font-semibold text-foreground",children:"Live Employee Locations"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Real-time tracking of employee locations"})]}),(0,s.jsx)(i.$,{variant:"outline",size:"sm",onClick:k,disabled:v,children:v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{className:"mr-2 h-4 w-4"}),"Refresh"]})})]})}),(0,s.jsxs)(n.Wu,{className:"space-y-6",children:[r&&(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)(d.A,{className:"w-8 h-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading live locations..."})]})}),g&&(0,s.jsx)("div",{className:"p-4 text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-md",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Error:"})," ",g]}),(0,s.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{j(null),k()},children:"Try Again"})]})}),!r&&!g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(n.Zp,{className:"bg-muted/30",children:(0,s.jsx)(n.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o.A,{className:"h-5 w-5 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Total Employees"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground",children:e.length})]})]})})}),(0,s.jsx)(n.Zp,{className:"bg-muted/30",children:(0,s.jsx)(n.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Live Locations"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground",children:e.filter(e=>5>=Math.floor((new Date().getTime()-new Date("".concat(e.updatedAt,"T").concat(e.updatedTime)).getTime())/6e4)).length})]})]})})}),(0,s.jsx)(n.Zp,{className:"bg-muted/30",children:(0,s.jsx)(n.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.A,{className:"h-5 w-5 text-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Last Updated"}),(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.length>0?_(e[0].updatedAt,e[0].updatedTime):"No data"})]})]})})})]}),e.length>0&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Location Map"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Interactive map showing all employee locations"})]}),(0,s.jsx)("div",{className:"h-96 w-full",children:(0,s.jsx)(f,{markers:E,center:[22.5726,88.3639],zoom:5,highlightedEmployee:y,onMarkerClick:t=>{let r=e.find(e=>e.id===t.id);r&&N(r)}})})]})}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Employee Locations"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Detailed list of all employee locations"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No live location data available"}):(0,s.jsx)("div",{className:"space-y-2 p-4",children:e.map(e=>(0,s.jsx)("div",{className:"p-4 rounded-lg border cursor-pointer transition-colors ".concat((null==y?void 0:y.id)===e.id?"bg-primary/10 border-primary":"bg-card hover:bg-muted/50"),onClick:()=>N(e),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-semibold",children:e.empName.split(" ").map(e=>e[0]).join("").toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:e.empName}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ID: ",e.empId," â€¢ ",T(e.updatedAt)," ",A(e.updatedTime)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(l.E,{className:M(e.updatedAt,e.updatedTime),children:S(e.updatedAt,e.updatedTime)}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-foreground",children:[e.latitude.toFixed(6),", ",e.longitude.toFixed(6)]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:_(e.updatedAt,e.updatedTime)})]})]})]})},e.id))})})]})}),y&&(0,s.jsx)(n.Zp,{className:"bg-muted/30",children:(0,s.jsx)(n.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(x.A,{className:"h-5 w-5 text-primary mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground",children:"Selected Employee Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",y.empName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Employee ID:"})," ",y.empId]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"}),(0,s.jsx)(l.E,{className:"ml-2 ".concat(M(y.updatedAt,y.updatedTime)),children:S(y.updatedAt,y.updatedTime)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Coordinates:"})," ",y.latitude,", ",y.longitude]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Last Updated:"})," ",T(y.updatedAt)," ",A(y.updatedTime)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Time Ago:"})," ",_(y.updatedAt,y.updatedTime)]})]})]})]})]})})})]})]})]})})};function j(){return(0,s.jsx)(g,{})}},80191:(e,t,r)=>{Promise.resolve().then(r.bind(r,76751))},86278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=r(28140)._(r(1150));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,s.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},91169:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[9358,9687,8441,1255,7358],()=>e(e.s=80191)),_N_E=e.O()}]);