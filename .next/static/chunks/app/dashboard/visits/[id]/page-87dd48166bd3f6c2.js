(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4632],{1524:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},26983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},35626:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},68209:(e,t,s)=>{"use strict";s.d(t,{N4:()=>c,Xb:()=>o,co:()=>d,y1:()=>u});let a="https://api.gajkesaristeels.in",r="".concat(a,"/user/token"),l="".concat(a,"/user/logout"),n="".concat(a,"/user/manage/get"),i="".concat(a,"/user/manage/current-user"),o=e=>e?e.trim().replace(/\s+/g," ").toUpperCase():null,c=e=>{let t=o(e);return"MANAGER"===t||"ROLE MANAGER"===t||"ROLE_MANAGER"===t||"OFFICE MANAGER"===t||"OFFICE_MANAGER"===t||"ROLE OFFICE MANAGER"===t||"ROLE_OFFICE MANAGER"===t||"ROLE_OFFICE_MANAGER"===t},d=(e,t)=>{var s;return!!c(e)||(null!=(s=null==t?void 0:t.authorities)?s:[]).some(e=>c(e.authority))},m={getToken:()=>localStorage.getItem("authToken"),setToken:e=>{{localStorage.setItem("authToken",e);let t="localhost"===window.location.hostname?"authToken=".concat(e,"; path=/; max-age=86400; samesite=strict"):"authToken=".concat(e,"; path=/; max-age=86400; secure; samesite=strict");document.cookie=t}},removeToken:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("currentUser"),document.cookie="authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},getAuthHeader:()=>{let e=m.getToken();return e?"Bearer ".concat(e):null},setUserRole:e=>{localStorage.setItem("userRole",e.roles),localStorage.setItem("userData",JSON.stringify(e))},getUserRole:()=>localStorage.getItem("userRole"),getUserData:()=>{{let e=localStorage.getItem("userData");return e?JSON.parse(e):null}},setCurrentUser:e=>{localStorage.setItem("currentUser",JSON.stringify(e))},getCurrentUser:()=>{{let e=localStorage.getItem("currentUser");return e?JSON.parse(e):null}}},u={login:async e=>{try{let t=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.text();throw Error("Login failed: ".concat(t.status," ").concat(e))}let s=await t.text(),{role:a,token:l}=(e=>{let t=e.trim();if(!t)throw Error("Empty response received from login endpoint");try{let e=JSON.parse(t);if("string"==typeof e.token){var s;return{token:e.token.trim(),role:null!=(s=e.role)?s:"USER"}}}catch(e){}let a=t.split(/\s+/);if(a.length<2)throw Error('Unexpected login response: "'.concat(t,'"'));let r=a[0],l=a[a.length-1];if("bearer"===l.toLowerCase()&&a.length>=3&&(l=a[a.length-1]),!(l=l.replace(/^"(.*)"$/,"$1")).includes("."))throw Error('Parsed token looks invalid: "'.concat(l,'"'));return{token:l,role:r||"USER"}})(s);m.setToken(l);try{console.log("Fetching role for username:",e.username),console.log("Raw token response:",s),console.log("Token being used:",l);let t=await fetch("".concat(n,"?username=").concat(e.username),{credentials:"include",method:"GET",headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"}});if(t.ok){let e=await t.json();m.setUserRole(e),console.log("User role data stored:",e)}else{console.warn("Failed to fetch user role data:",t.status,t.statusText);let e=await t.text();console.warn("Error response:",e)}}catch(e){console.warn("Error fetching user role data:",e)}try{let e=await fetch(i,{credentials:"include",method:"GET",headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"}});if(e.ok){let t=await e.json();m.setCurrentUser(t),console.log("Current user data stored:",t)}else console.warn("Failed to fetch current user data:",e.status)}catch(e){console.warn("Error fetching current user data:",e)}return{token:l,role:a||"USER"}}catch(e){throw console.error("Login error:",e),e}},logout:async()=>{try{let e=m.getToken();if(!e)return void m.removeToken();let t=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});m.removeToken(),t.ok||console.warn("Logout request failed, but token was cleared locally")}catch(e){console.error("Logout error:",e),m.removeToken()}},isAuthenticated:()=>!!m.getToken(),getStoredToken:()=>m.getToken(),getUserRole:()=>m.getUserRole(),getUserData:()=>m.getUserData(),getCurrentUser:()=>m.getCurrentUser()}},82466:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>o});var a=s(95155),r=s(12115),l=s(68209),n=s(20063);let i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),[h,x]=(0,r.useState)(null),[g,p]=(0,r.useState)(null),[f,j]=(0,r.useState)(null),v=(0,r.useRef)(null),N=(0,n.useRouter)(),b=e=>{if(!e)return null;let t=e.split(".");if(t.length<2)return null;try{let e=t[1].replace(/-/g,"+").replace(/_/g,"/");if("function"!=typeof atob)return null;let s=atob(e),a=JSON.parse(s);if("number"==typeof a.exp)return a.exp;return null}catch(e){return null}};(0,r.useEffect)(()=>{let e=l.y1.getStoredToken(),t=l.y1.getUserRole(),s=l.y1.getUserData(),a=l.y1.getCurrentUser();if(e){let r=b(e),n=Math.floor(Date.now()/1e3);r&&r<=n?l.y1.logout().finally(()=>{d(null),o(!1),x(null),p(null),j(null),N.replace("/login")}):(d(e),o(!0),x(t),p(s),j(a))}u(!1)},[]);let y=async(e,t)=>{u(!0);try{let s=await l.y1.login({username:e,password:t});d(s.token),o(!0);let a=l.y1.getUserRole(),r=l.y1.getUserData(),n=l.y1.getCurrentUser();x(a),p(r),j(n)}catch(e){throw e}finally{u(!1)}},w=async()=>{try{await l.y1.logout(),d(null),o(!1),x(null),p(null),j(null),sessionStorage.removeItem("pricingModalDismissed"),N.replace("/login")}catch(e){throw d(null),o(!1),x(null),p(null),sessionStorage.removeItem("pricingModalDismissed"),e}};return(0,r.useEffect)(()=>{if(v.current&&(clearTimeout(v.current),v.current=null),!c)return;let e=b(c);if(!e)return;let t=1e3*e-Date.now();return t<=0?void w():(v.current=setTimeout(()=>{w()},t),()=>{v.current&&(clearTimeout(v.current),v.current=null)})},[c]),(0,a.jsx)(i.Provider,{value:{isAuthenticated:s,token:c,login:y,logout:w,isLoading:m,userRole:h,userData:g,currentUser:f},children:t})}function c(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},84926:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},89715:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},93526:(e,t,s)=>{Promise.resolve().then(s.bind(s,95388))},95388:(e,t,s)=>{"use strict";s.d(t,{default:()=>ea});var a=s(95155),r=s(12115),l=s(20063),n=s(97003),i=s(83209),o=s(90923),c=s(67812),d=s(33789),m=s(90235),u=s(47507),h=s(26983),x=s(35299),g=s(42529),p=s(16485),f=s(20508),j=s(69141),v=s(23664),N=s(21873),b=s(35626),y=s(55136),w=s(6191),k=s(87066),T=s(71847);let C=(0,T.A)("list-todo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),S=(0,T.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),A=(0,T.A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var D=s(84926),I=s(1524),M=s(71871),E=s(89715);let R=(0,T.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var q=s(90368),_=s(27937);let P=(0,T.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var z=s(11010),U=s(71360),L=s(71163),F=s(26467),O=s(73344),B=s(97450),V=s(3648),G=s(24033),$=s(74854),J=s(45704),Z=s(25016);function H(){let e=(0,V._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return H=function(){return e},e}function W(){let e=(0,V._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return W=function(){return e},e}function X(e){let{className:t,classNames:s,showOutsideDays:r=!0,captionLayout:l="label",buttonVariant:i="ghost",formatters:o,components:c,...d}=e,m=(0,$.a)();return(0,a.jsx)(J.h,{showOutsideDays:r,className:(0,Z.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(H()),String.raw(W()),t),captionLayout:l,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...o},classNames:{root:(0,Z.cn)("w-fit",m.root),months:(0,Z.cn)("flex gap-4 flex-col md:flex-row relative",m.months),month:(0,Z.cn)("flex flex-col w-full gap-4",m.month),nav:(0,Z.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",m.nav),button_previous:(0,Z.cn)((0,n.r)({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",m.button_previous),button_next:(0,Z.cn)((0,n.r)({variant:i}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",m.button_next),month_caption:(0,Z.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",m.month_caption),dropdowns:(0,Z.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",m.dropdowns),dropdown_root:(0,Z.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",m.dropdown_root),dropdown:(0,Z.cn)("absolute bg-popover inset-0 opacity-0",m.dropdown),caption_label:(0,Z.cn)("select-none font-medium","label"===l?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",m.caption_label),table:"w-full border-collapse",weekdays:(0,Z.cn)("flex",m.weekdays),weekday:(0,Z.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",m.weekday),week:(0,Z.cn)("flex w-full mt-2",m.week),week_number_header:(0,Z.cn)("select-none w-(--cell-size)",m.week_number_header),week_number:(0,Z.cn)("text-[0.8rem] select-none text-muted-foreground",m.week_number),day:(0,Z.cn)("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",m.day),range_start:(0,Z.cn)("rounded-l-md bg-accent",m.range_start),range_middle:(0,Z.cn)("rounded-none",m.range_middle),range_end:(0,Z.cn)("rounded-r-md bg-accent",m.range_end),today:(0,Z.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",m.today),outside:(0,Z.cn)("text-muted-foreground aria-selected:text-muted-foreground",m.outside),disabled:(0,Z.cn)("text-muted-foreground opacity-50",m.disabled),hidden:(0,Z.cn)("invisible",m.hidden),...s},components:{Root:e=>{let{className:t,rootRef:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"calendar",ref:s,className:(0,Z.cn)(t),...r})},Chevron:e=>{let{className:t,orientation:s,...r}=e;return"left"===s?(0,a.jsx)(q.A,{className:(0,Z.cn)("size-4",t),...r}):"right"===s?(0,a.jsx)(_.A,{className:(0,Z.cn)("size-4",t),...r}):(0,a.jsx)(G.A,{className:(0,Z.cn)("size-4",t),...r})},DayButton:Y,WeekNumber:e=>{let{children:t,...s}=e;return(0,a.jsx)("td",{...s,children:(0,a.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:t})})},...c},...d})}function Y(e){let{className:t,day:s,modifiers:l,...i}=e,o=(0,$.a)(),c=r.useRef(null);return r.useEffect(()=>{var e;l.focused&&(null==(e=c.current)||e.focus())},[l.focused]),(0,a.jsx)(n.$,{ref:c,variant:"ghost",size:"icon","data-day":s.date.toLocaleDateString(),"data-selected-single":l.selected&&!l.range_start&&!l.range_end&&!l.range_middle,"data-range-start":l.range_start,"data-range-end":l.range_end,"data-range-middle":l.range_middle,className:(0,Z.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",o.day,t),...i})}var K=s(37621),Q=s(82466),ee=s(68209),et=s(15239),es=s(86502);function ea(){var e,t,s,T;let V=(0,l.useRouter)(),G=(0,l.useParams)(),$=null==G?void 0:G.id,{userRole:J,userData:Z,currentUser:H}=(0,Q.A)(),[W,Y]=(0,r.useState)(null),[ea,er]=(0,r.useState)("metrics"),[el,en]=(0,r.useState)("visit-info"),[ei,eo]=(0,r.useState)([]),[ec,ed]=(0,r.useState)([]),[em,eu]=(0,r.useState)([]),[eh,ex]=(0,r.useState)([]),[eg,ep]=(0,r.useState)([]),[ef,ej]=(0,r.useState)([]),[ev,eN]=(0,r.useState)([]),[eb,ey]=(0,r.useState)([]),[ew,ek]=(0,r.useState)(!0),[eT,eC]=(0,r.useState)(null),[eS,eA]=(0,r.useState)([]),[eD,eI]=(0,r.useState)(!1),[eM,eE]=(0,r.useState)(null),[eR,eq]=(0,r.useState)(1),[e_,eP]=(0,r.useState)(3),[ez,eU]=(0,r.useState)(""),[eL,eF]=(0,r.useState)(!1),[eO,eB]=(0,r.useState)("all"),[eV,eG]=(0,r.useState)([]),[e$,eJ]=(0,r.useState)([]),[eZ,eH]=(0,r.useState)(!1),[eW,eX]=(0,r.useState)(!1),[eY,eK]=(0,r.useState)("general"),[eQ,e0]=(0,r.useState)("general"),[e1,e2]=(0,r.useState)([]),[e4,e3]=(0,r.useState)([]),[e6,e8]=(0,r.useState)({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number($),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),[e5,e7]=(0,r.useState)({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number($),visitDate:"",status:"Assigned",priority:"low",taskType:"complaint",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),[e9,te]=(0,r.useState)(null),[tt,ts]=(0,r.useState)(!1),[ta,tr]=(0,r.useState)(!1),[tl,tn]=(0,r.useState)(!1),[ti,to]=(0,r.useState)(""),[tc,td]=(0,r.useState)(null),[tm,tu]=(0,r.useState)(null),[th,tx]=(0,r.useState)(!1),[tg,tp]=(0,r.useState)(""),[tf,tj]=(0,r.useState)([]),[tv,tN]=(0,r.useState)([]),[tb,ty]=(0,r.useState)(""),[tw,tk]=(0,r.useState)(""),tT=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);(0,r.useEffect)(()=>{ts((0,ee.co)(J,H))},[J,H]);let tC=e=>{let t={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800";return(0,a.jsx)("span",{className:"status-badge ".concat(t),children:e})},tS=e=>{let t={Assigned:"bg-muted text-muted-foreground","Work in Progress":"bg-orange-100 text-orange-800",Complete:"bg-green-100 text-green-800"},s=e in t?t[e]:"bg-gray-100 text-gray-800";return(0,a.jsx)("span",{className:"status-badge ".concat(s),children:e})},tA=async(e,t)=>{try{new K.n;let s=await Promise.all(t.filter(e=>"check-in"===e.tag).map(async t=>{try{let s=await fetch("https://api.gajkesaristeels.in/visit/downloadFile/".concat(e,"/check-in/").concat(t.fileName),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!s.ok)throw Error("Failed to fetch image");let a=await s.blob();return URL.createObjectURL(a)}catch(e){return console.error("Error fetching individual image:",e),null}}));eA(s.filter(e=>null!==e))}catch(e){console.error("Error fetching check-in images:",e),eA([])}},tD=(0,r.useCallback)(async e=>{try{ek(!0),eC(null);let t=new K.n,s=await t.getVisitById(Number(e));Y({...s,purpose:s.purpose||"",priority:s.priority||"low",outcome:s.outcome||null,brandsInUse:s.brandsInUse||[],brandProCons:s.brandProCons||[],createdAt:s.createdAt||"",updatedAt:s.updatedAt||"",storeId:s.storeId||0,employeeId:s.employeeId||0}),tI(s.checkinTime||"",s.checkoutTime||""),ek(!1),(async()=>{try{var a,r,l;let[n,i,o,c,d,m,u]=await Promise.all([t.getVisitProCons(Number(e)),t.getIntentAuditByVisit(Number(e)),t.getMonthlySaleByVisit(Number(e)),t.getTasksByVisit("requirement",Number(e)),t.getTasksByVisit("complaint",Number(e)),t.getNotesByVisit(Number(e)),t.getVisitsByStore(s.storeId||0)]);ed(n||[]),eu(i||[]),ex(o||[]),ep(c||[]),ej(d||[]),eN(m||[]);let h=(u||[]).slice().sort((e,t)=>{let s=new Date(e.visit_date).getTime();return new Date(t.visit_date).getTime()-s});if(ey(h),i&&i.length>0){let e=null!=(r=null==(a=i[i.length-1])?void 0:a.newIntentLevel)?r:"N/A";eo(t=>[...t.filter(e=>"Intent Level"!==e.title),{title:"Intent Level",value:String(e)}])}if(o&&o.length>0){let e="".concat(o[0].newMonthlySale.toLocaleString()," tons");eo(t=>[...t.filter(e=>"Monthly Sales"!==e.title),{title:"Monthly Sales",value:e}])}if(s.attachmentResponse&&s.attachmentResponse.length>0&&tA(Number(e),s.attachmentResponse),u&&u.length>0){let e=u[0];te({contactNumber:(null==(l=e.storePrimaryContact)?void 0:l.toString())||"Not available",city:e.city||"Not available",address:"".concat(e.subDistrict||"",", ").concat(e.district||"",", ").concat(e.state||"").replace(/^[, ]+|[, ]+$/g,"")||"Not available"})}}catch(e){console.error("Error loading visit auxiliary data:",e)}})()}catch(e){eC((null==e?void 0:e.message)||"Failed to load visit details"),console.error("Error fetching visit details:",e),ek(!1)}},[]),tI=(e,t)=>{if(!e||!t)return void eo(e=>e.filter(e=>"Visit Duration"!==e.title));let s=new Date("1970-01-01T".concat(e,"Z")),a=new Date(new Date("1970-01-01T".concat(t,"Z")).getTime()-s.getTime()),r=a.getUTCHours(),l=a.getUTCMinutes(),n="0";(r>0||l>0)&&(n="".concat(r>0?"".concat(r," hour").concat(r>1?"s":""," "):"").concat(l>0?"".concat(l," minute").concat(l>1?"s":""):"").trim()),eo(e=>[...e.filter(e=>"Visit Duration"!==e.title),{title:"Visit Duration",value:n}])};(0,r.useEffect)(()=>{$&&tD($)},[$,tD]);let tM=e=>{eB(e)},tE=(0,r.useCallback)(()=>{let e=e=>"all"===eO?e:e.filter(e=>e.priority===eO);eG(e(eg)),eJ(e(ef))},[eO,eg,ef]),tR=eR*e_,tq=tR-e_,t_=eb.slice(tq,tR),tP=Math.ceil(eb.length/e_);(0,r.useEffect)(()=>{eq(1)},[e_]),(0,r.useEffect)(()=>{tE()},[eg,ef,eO,tE]);let tz=(null==(T=W)?void 0:T.checkinTime)&&(null==T?void 0:T.checkoutTime)?{emoji:"✅",status:"Completed",color:"bg-purple-100 text-purple-800",isOngoing:!1}:(null==T?void 0:T.checkoutTime)?{emoji:"⏱️",status:"Checked Out",color:"bg-orange-100 text-orange-800",isOngoing:!1}:(null==T?void 0:T.checkinTime)?{emoji:"\uD83D\uDD70️",status:"On Going",color:"bg-green-100 text-green-800",isOngoing:!0}:{emoji:"\uD83D\uDCC5",status:"Assigned",color:"bg-muted text-muted-foreground",isOngoing:!1};p.A,W&&"".concat((0,L.GP)(new Date(W.visit_date),"MMM d, yyyy")," at ").concat(W.checkinTime||"N/A"),h.A,null==(e=ei.find(e=>"Visit Duration"===e.title))||e.value,f.A,null==W||W.employeeName,j.A,null==e9||e9.contactNumber,v.A,N.A,null==e9||e9.address;let tU=[{label:"Total Visits",value:eb.length},{label:"Intent Level",value:(null==(t=ei.find(e=>"Intent Level"===e.title))?void 0:t.value)||"N/A"},{label:"Monthly Sale",value:(null==(s=ei.find(e=>"Monthly Sales"===e.title))?void 0:s.value)||"N/A"},{label:"Priority",value:(null==W?void 0:W.priority)||"N/A"}],tL=e=>{eE(e),eI(!0)},tF=async()=>{if(ti.trim())try{if(tl&&null!==tc){if(tm){if(!(await fetch("https://api.gajkesaristeels.in/notes/edit?id=".concat(tc),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},body:JSON.stringify({content:ti,employeeId:tm.employeeId,storeId:tm.storeId})})).ok)throw Error("Failed to update note");let e=ev.map(e=>e.id===tc?{...e,content:ti}:e);eN(e)}}else if(W){let e=await fetch("https://api.gajkesaristeels.in/notes/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},body:JSON.stringify({content:ti,employeeId:W.employeeId||0,storeId:W.storeId||0,visitId:Number($)})});if(!e.ok)throw Error("Failed to create note");let t={id:(await e.json()).id,content:ti,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],createdTime:new Date().toISOString(),updatedTime:new Date().toISOString(),employeeId:W.employeeId||0,employeeName:W.employeeName||"",storeId:W.storeId||0,storeName:W.storeName||"",visitId:Number($)};eN([t,...ev])}tr(!1),to(""),tn(!1),td(null)}catch(e){console.error("Error saving note:",e)}},tO=async e=>{try{if(!(await fetch("https://api.gajkesaristeels.in/notes/delete?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}})).ok)throw Error("Failed to delete note");eN(ev.filter(t=>t.id!==e))}catch(e){console.error("Error deleting note:",e)}},tB=async e=>{try{var t,s,a,r;let l={..."requirement"===e?e6:e5,taskType:e,storeId:null!=(t=null==W?void 0:W.storeId)?t:0,assignedToId:null!=(s=null==W?void 0:W.employeeId)?s:0,assignedToName:null!=(a=null==W?void 0:W.employeeName)?a:"",storeName:null!=(r=null==W?void 0:W.storeName)?r:"",visitId:Number($)},n=await fetch("https://api.gajkesaristeels.in/task/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},body:JSON.stringify(l)});if(!n.ok)throw Error("Failed to create task");let i={id:(await n.json()).id,title:l.taskTitle,description:l.taskDesciption,type:l.taskType,status:l.status,priority:l.priority,assignedTo:l.assignedToName,dueDate:l.dueDate,visitId:l.visitId};"requirement"===e?(ep(e=>[i,...e]),e8({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number($),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),eH(!1),eK("general")):(ej(e=>[i,...e]),e7({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number($),visitDate:"",status:"Assigned",priority:"low",taskType:"complaint",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),eX(!1),e0("general"))}catch(e){console.error("Error creating task:",e)}};return ew?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"visit-details grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-6",children:[(0,a.jsxs)("aside",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,a.jsxs)("div",{className:"back-button-container flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"back-button flex items-center cursor-pointer text-foreground hover:text-muted-foreground",onClick:()=>{V.back()},children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)(c.E,{className:"flex items-center gap-2 px-3 py-1 text-sm font-medium",children:[(e=>{switch(e){case"Assigned":return(0,a.jsx)(h.A,{className:"w-4 h-4"});case"On Going":return(0,a.jsx)(x.A,{className:"w-4 h-4"});case"Checked Out":case"Completed":return(0,a.jsx)(g.A,{className:"w-4 h-4"});default:return null}})(tz.status),(0,a.jsx)("span",{children:tz.status})]}),J&&(0,a.jsx)(c.E,{variant:tt?"secondary":"default",className:"text-xs",children:tt?"Manager View":"Admin View"})]})]}),(0,a.jsx)(i.Zp,{className:"bg-transparent border-0 shadow-none",children:(0,a.jsxs)(i.Wu,{className:"p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"profile text-center mb-4 md:mb-6",children:[(0,a.jsx)("div",{className:"avatar w-12 h-12 md:w-16 md:h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("span",{className:"text-lg md:text-xl font-semibold text-foreground",children:tT((null==W?void 0:W.employeeName)||"")})}),(0,a.jsx)("h2",{className:"text-lg md:text-xl font-semibold",children:null==W?void 0:W.employeeName}),(0,a.jsx)("p",{className:"text-sm md:text-base text-gray-600 break-words",children:null==W?void 0:W.storeName})]}),(0,a.jsxs)("div",{className:"action-buttons grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-1 gap-2 md:gap-3 mb-4 md:mb-6",children:[(0,a.jsxs)(n.$,{className:"w-full text-sm",onClick:()=>{W&&W.storeId&&V.push("/dashboard/customers/".concat(W.storeId))},children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"View Store"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Store"})]}),(0,a.jsxs)(n.$,{className:"w-full text-sm",onClick:()=>eH(!0),children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Add Requirement"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Requirement"})]}),(0,a.jsxs)(n.$,{className:"w-full text-sm",onClick:()=>eX(!0),children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Add Complaint"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Complaint"})]})]})]})}),(0,a.jsxs)(i.Zp,{className:"w-full border border-border bg-card shadow-sm",children:[(0,a.jsx)(i.aR,{className:"pb-4",children:(0,a.jsx)(i.ZB,{className:"text-base font-semibold text-foreground text-center",children:"Visit Information"})}),(0,a.jsxs)(i.Wu,{className:"p-0",children:[(0,a.jsxs)("div",{className:"flex border-b border-border",children:[(0,a.jsx)("button",{className:"flex-1 px-3 py-2 text-sm font-medium border-b-2 transition-colors ".concat("visit-info"===el?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>en("visit-info"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Visit Info"})]})}),(0,a.jsx)("button",{className:"flex-1 px-3 py-2 text-sm font-medium border-b-2 transition-colors ".concat("store-info"===el?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>en("store-info"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Store Info"})]})})]}),(0,a.jsxs)("div",{className:"p-4",children:["visit-info"===el&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900",children:(0,a.jsx)(C,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Purpose"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground break-words",children:(null==W?void 0:W.purpose)||"N/A"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-yellow-100 dark:bg-yellow-900",children:(0,a.jsx)(N.A,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Location"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null==W?void 0:W.checkinLatitude)&&(null==W?void 0:W.checkinLongitude)?(0,a.jsxs)("button",{onClick:()=>{(null==W?void 0:W.checkinLatitude)&&(null==W?void 0:W.checkinLongitude)&&window.open("https://www.google.com/maps?q=".concat(W.checkinLatitude,",").concat(W.checkinLongitude),"_blank")},className:"text-foreground hover:text-muted-foreground transition-colors flex items-center gap-1",children:[(0,a.jsx)(S,{className:"w-4 h-4"}),"View Location"]}):(0,a.jsx)("span",{children:"Location not available"})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-green-100 dark:bg-green-900",children:(0,a.jsx)(A,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Check-in"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null==W?void 0:W.checkinDate)&&(null==W?void 0:W.checkinTime)?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:(0,L.GP)(new Date(W.checkinDate),"dd MMM yyyy")}),(0,a.jsx)("span",{className:"text-xs",children:(0,L.GP)((0,F.H)("1970-01-01T".concat(W.checkinTime)),"h:mm a")})]}):(0,a.jsx)("span",{children:"Check-in not available"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-red-100 dark:bg-red-900",children:(0,a.jsx)(D.A,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Check-out"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null==W?void 0:W.checkoutDate)&&(null==W?void 0:W.checkoutTime)?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:(0,L.GP)(new Date(W.checkoutDate),"dd MMM yyyy")}),(0,a.jsx)("span",{className:"text-xs",children:(0,L.GP)((0,F.H)("1970-01-01T".concat(W.checkoutTime)),"h:mm a")})]}):(0,a.jsx)("span",{children:"Check-out not available"})})]})]})]})]}),"store-info"===el&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 p-4 bg-muted/30 rounded-lg",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:(0,a.jsx)(y.A,{className:"h-5 w-5 text-muted-foreground"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground text-base break-words",children:null==W?void 0:W.storeName}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:null==e9?void 0:e9.city})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-muted",children:(0,a.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Contact"}),(null==e9?void 0:e9.contactNumber)?(0,a.jsx)("a",{href:"tel:".concat(e9.contactNumber),className:"text-sm text-foreground hover:text-muted-foreground transition-colors break-words",children:e9.contactNumber}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No contact available"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-green-100 dark:bg-green-900",children:(0,a.jsx)(N.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Location"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("p",{className:"break-words",children:(null==e9?void 0:e9.address)||"Address not available"}),(null==e9?void 0:e9.city)&&(0,a.jsxs)("button",{onClick:()=>window.open("https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(null==W?void 0:W.storeName," ").concat(null==e9?void 0:e9.address))),"_blank"),className:"text-foreground hover:text-muted-foreground transition-colors mt-1 inline-flex items-center gap-1 text-xs",children:[(0,a.jsx)(S,{className:"w-4 h-4"}),"View on Maps"]})]})]})]})]})]})]})]})]})]}),(0,a.jsxs)("section",{className:"lg:col-span-6",children:[(0,a.jsxs)("div",{className:"tabs border-b mb-4 md:mb-6",children:[(0,a.jsx)("div",{className:"md:hidden mb-3",children:(0,a.jsxs)(u.l6,{value:ea,onValueChange:er,children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select section"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"metrics",children:"Visit Metrics"}),(0,a.jsx)(u.eb,{value:"visits",children:"Recent Visits"}),(0,a.jsx)(u.eb,{value:"brands",children:"Brands"}),(0,a.jsx)(u.eb,{value:"requirements",children:"Requirements"}),(0,a.jsx)(u.eb,{value:"complaints",children:"Complaints"})]})]})}),(0,a.jsxs)("div",{className:"hidden md:flex md:gap-2 md:overflow-x-auto md:flex-nowrap",children:[(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("metrics"===ea?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>er("metrics"),children:[(0,a.jsx)(I.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Metrics"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("visits"===ea?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>er("visits"),children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Visits"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("brands"===ea?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>er("brands"),children:[(0,a.jsx)(M.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Brands"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("requirements"===ea?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>er("requirements"),children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Requirements"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("complaints"===ea?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>er("complaints"),children:[(0,a.jsx)(R,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Complaints"})]})]})]}),(0,a.jsxs)("div",{className:"tab-content",children:["metrics"===ea&&(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-base font-semibold text-foreground",children:"Visit Metrics"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:tU.map((e,t)=>(0,a.jsxs)("div",{className:"text-center p-3 md:p-4 bg-muted/30 rounded-lg",children:[(0,a.jsx)(O.EY,{size:"sm",tone:"muted",weight:"medium",className:"mb-2",children:e.label}),(0,a.jsx)(O.DZ,{size:"lg",weight:"semibold",className:"text-foreground break-words",children:e.value})]},t))})})]}),"visits"===ea&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"filter-bar mb-4",children:(0,a.jsx)(d.p,{placeholder:"Search by Visit Purpose",value:ez,onChange:e=>eU(e.target.value),className:"w-full md:w-64"})}),(0,a.jsx)("div",{className:"visits-list space-y-3",children:t_.map(e=>{let t=e.checkinDate&&e.checkinTime&&e.checkoutDate&&e.checkoutTime?{status:"Completed",color:"bg-green-100 text-green-800",icon:"✅"}:e.checkinDate&&e.checkinTime?{status:"In Progress",color:"bg-blue-100 text-blue-800",icon:"\uD83D\uDD50"}:{status:"Scheduled",color:"bg-yellow-100 text-yellow-800",icon:"\uD83D\uDCC5"};return(0,a.jsx)(i.Zp,{className:"w-full hover:shadow-sm transition-all duration-200 border-l-2 border-l-primary/30 hover:border-l-primary",children:(0,a.jsxs)(i.Wu,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-primary/10",children:(0,a.jsx)(p.A,{className:"h-3 w-3 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-sm text-foreground",children:e.purpose}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ID: ",e.id]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(c.E,{className:"".concat(t.color," text-xs px-2 py-1"),children:[(0,a.jsx)("span",{className:"mr-1",children:t.icon}),t.status]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-foreground",children:e.checkinDate&&e.checkinTime?(0,L.GP)(new Date(e.checkinDate),"dd MMM ''yy"):"TBD"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.checkinDate&&e.checkinTime?(0,L.GP)((0,F.H)("1970-01-01T".concat(e.checkinTime)),"h:mm a"):"TBD"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.employeeName})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground truncate max-w-32",children:e.storeName})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(h.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.checkinDate&&e.checkinTime&&e.checkoutDate&&e.checkoutTime?((e,t)=>{try{let s=new Date("2000-01-01T".concat(e)),a=new Date("2000-01-01T".concat(t)).getTime()-s.getTime(),r=Math.floor(a/6e4),l=Math.floor(r/60);return"".concat(l,"h ").concat(r%60,"m")}catch(e){return"N/A"}})(e.checkinTime,e.checkoutTime):"TBD"})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>V.push("/dashboard/visits/".concat(e.id)),className:"text-xs h-6 px-2",children:"View"})]})]})]})},e.id)})}),eb.length>e_&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(n.$,{onClick:()=>eF(!eL),children:eL?"Show Less":"Show More"}),eL&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.J,{htmlFor:"pageSize",children:"Rows per page:"}),(0,a.jsxs)(u.l6,{value:e_.toString(),onValueChange:e=>eP(parseInt(e)),children:[(0,a.jsx)(u.bq,{className:"w-20",children:(0,a.jsx)(u.yv,{})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"3",children:"3"}),(0,a.jsx)(u.eb,{value:"5",children:"5"}),(0,a.jsx)(u.eb,{value:"10",children:"10"}),(0,a.jsx)(u.eb,{value:"25",children:"25"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>eq(Math.max(1,eR-1)),disabled:1===eR,children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",eR," of ",tP]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>eq(Math.min(tP,eR+1)),disabled:eR>=tP,children:["Next",(0,a.jsx)(_.A,{className:"h-4 w-4"})]})]})]})]})]}),"brands"===ea&&(0,a.jsx)(es.A,{brands:ec,setBrands:ed,visitId:$,token:localStorage.getItem("authToken"),fetchVisitDetail:async()=>{$&&await tD($)}}),"requirements"===ea&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"filter-bar mb-4",children:(0,a.jsxs)(u.l6,{value:eO,onValueChange:tM,children:[(0,a.jsx)(u.bq,{className:"w-full md:w-48",children:(0,a.jsx)(u.yv,{placeholder:"Filter by Priority"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"all",children:"All Priorities"}),(0,a.jsx)(u.eb,{value:"low",children:"Low"}),(0,a.jsx)(u.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(u.eb,{value:"high",children:"High"})]})]})}),(0,a.jsx)("div",{className:"requirements-list space-y-3 md:space-y-4",children:eV.map((e,t)=>(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-3 md:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 mb-3",children:[(0,a.jsx)("span",{className:"font-medium text-foreground text-sm md:text-base break-words",children:e.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[tC(e.priority),tS(e.status)]})]}),(0,a.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 space-y-2",children:[(0,a.jsxs)("p",{children:["Due: ",(0,L.GP)(new Date(e.dueDate),"MMM d, yyyy")]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"avatar w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-200 flex items-center justify-center mr-2",children:(0,a.jsx)("span",{className:"text-xs",children:tT(e.assignedTo||"Unknown")})}),(0,a.jsxs)("span",{className:"break-words",children:["Assigned to ",e.assignedTo||"Unknown"]})]}),(0,a.jsx)("p",{className:"break-words",children:e.description})]})]})},t))})]}),"complaints"===ea&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"filter-bar mb-4",children:(0,a.jsxs)(u.l6,{value:eO,onValueChange:tM,children:[(0,a.jsx)(u.bq,{className:"w-full md:w-48",children:(0,a.jsx)(u.yv,{placeholder:"Filter by Priority"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"all",children:"All Priorities"}),(0,a.jsx)(u.eb,{value:"low",children:"Low"}),(0,a.jsx)(u.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(u.eb,{value:"high",children:"High"})]})]})}),(0,a.jsx)("div",{className:"complaints-list space-y-3 md:space-y-4",children:e$.map((e,t)=>(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-3 md:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 mb-3",children:[(0,a.jsx)("span",{className:"font-medium text-foreground text-sm md:text-base break-words",children:e.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[tC(e.priority),tS(e.status)]})]}),(0,a.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 space-y-2",children:[(0,a.jsxs)("p",{children:["Reported: ",(0,L.GP)(new Date(e.dueDate),"MMM d, yyyy")]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"avatar w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-200 flex items-center justify-center mr-2",children:(0,a.jsx)("span",{className:"text-xs",children:tT(e.assignedTo||"Unknown")})}),(0,a.jsxs)("span",{className:"break-words",children:["Handled by ",e.assignedTo||"Unknown"]})]}),(0,a.jsx)("p",{className:"break-words",children:e.description})]})]})},t))})]})]})]}),(0,a.jsxs)("aside",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3 md:pb-4",children:(0,a.jsx)(O.DZ,{as:"h3",size:"lg",weight:"semibold",className:"text-base md:text-lg",children:"Check-in Images"})}),(0,a.jsx)(i.Wu,{className:"p-3 md:p-6",children:eS.length>0?(0,a.jsx)("div",{className:"space-y-3 md:space-y-4",children:eS.map((e,t)=>(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsx)("div",{className:"relative w-full h-32 md:h-40 bg-gray-100",children:(0,a.jsx)(et.default,{src:e,alt:"Check-in image ".concat(t+1),width:300,height:200,className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>tL(e)})}),(0,a.jsxs)("div",{className:"p-2 md:p-3",children:[(0,a.jsxs)(O.DZ,{as:"h4",size:"sm",weight:"semibold",className:"text-sm md:text-base",children:["Check-in Image ",t+1]}),(0,a.jsx)(n.$,{size:"sm",variant:"outline",className:"mt-2 w-full text-xs md:text-sm",onClick:()=>tL(e),children:"View Full Size"})]})]},t))}):(0,a.jsxs)("div",{className:"text-center py-6 md:py-8",children:[(0,a.jsx)(P,{className:"h-8 w-8 md:h-12 md:w-12 text-gray-400 mx-auto mb-3 md:mb-4"}),(0,a.jsx)(O.EY,{tone:"muted",className:"text-sm md:text-base",children:"No images available for this visit"})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3 md:pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,a.jsx)(O.DZ,{as:"h3",size:"lg",weight:"semibold",className:"text-base md:text-lg",children:"Notes"}),(0,a.jsxs)(n.$,{onClick:()=>{tn(!1),to(""),tr(!0)},size:"sm",className:"text-xs md:text-sm",children:[(0,a.jsx)(w.A,{className:"h-3 w-3 md:h-4 md:w-4 mr-1 md:mr-2"}),"Add Note"]})]})}),(0,a.jsx)(i.Wu,{className:"p-3 md:p-6",children:(0,a.jsx)("div",{className:"notes-list space-y-3",children:ev.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-3 md:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,L.GP)(new Date(e.createdDate),"MMM d, yyyy")}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>{to(e.content),tn(!0),td(e.id),tu({employeeId:e.employeeId,storeId:e.storeId}),tr(!0)},className:"h-7 w-7",children:(0,a.jsx)(z.A,{className:"h-3 w-3"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>tO(e.id),className:"h-7 w-7",children:(0,a.jsx)(U.A,{className:"h-3 w-3"})})]})]}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-foreground break-words",children:e.content})]},e.id))})})]})]})]}),ta&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-md border-0 shadow-lg",children:[(0,a.jsx)(i.aR,{className:"pb-4",children:(0,a.jsx)(i.ZB,{className:"text-lg md:text-xl font-semibold text-foreground",children:tl?"Edit Note":"Add Note"})}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsx)("textarea",{placeholder:"Enter note content",value:ti,onChange:e=>to(e.target.value),rows:4,className:"w-full px-3 py-2 border border-input bg-background rounded-md text-sm resize-none focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>tr(!1),className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(n.$,{onClick:tF,className:"w-full sm:w-auto",children:tl?"Update":"Add"})]})]})]})}),eZ&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-2xl border-0 shadow-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(i.aR,{className:"pb-4",children:[(0,a.jsx)(i.ZB,{className:"text-lg md:text-xl font-semibold text-foreground",children:"Create Requirement"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Fill in the requirement details"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)(o.tU,{value:eY,onValueChange:eK,className:"w-full",children:[(0,a.jsxs)(o.j7,{className:"grid w-full grid-cols-2 mb-4",children:[(0,a.jsx)(o.Xi,{value:"general",children:"General"}),(0,a.jsx)(o.Xi,{value:"details",children:"Details"})]}),(0,a.jsx)(o.av,{value:"general",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementTitle",children:"Requirement Title"}),(0,a.jsx)(d.p,{id:"requirementTitle",placeholder:"Enter requirement title",value:e6.taskTitle,onChange:e=>e8({...e6,taskTitle:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementDescription",children:"Requirement Description"}),(0,a.jsx)(d.p,{id:"requirementDescription",placeholder:"Enter requirement description",value:e6.taskDesciption,onChange:e=>e8({...e6,taskDesciption:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementCategory",children:"Category"}),(0,a.jsxs)(u.l6,{value:"requirement",disabled:!0,children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Requirement"})}),(0,a.jsx)(u.gC,{children:(0,a.jsx)(u.eb,{value:"requirement",children:"Requirement"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementStoreName",children:"Store"}),(0,a.jsx)(d.p,{id:"requirementStoreName",value:W?"".concat(W.storeName):"Loading...",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>eH(!1),className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(n.$,{onClick:()=>eK("details"),className:"w-full sm:w-auto",children:"Next"})]})]})}),(0,a.jsx)(o.av,{value:"details",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementDueDate",children:"Due Date"}),(0,a.jsxs)(B.AM,{children:[(0,a.jsx)(B.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",className:"w-full justify-start text-left font-normal ".concat(!e6.dueDate&&"text-muted-foreground"),children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e6.dueDate?(0,L.GP)(new Date(e6.dueDate),"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(B.hl,{className:"w-auto p-0",children:(0,a.jsx)(X,{mode:"single",selected:e6.dueDate?new Date(e6.dueDate):void 0,onSelect:e=>e8({...e6,dueDate:e?e.toISOString().split("T")[0]:""}),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementAssignedTo",children:"Assigned To"}),(0,a.jsx)(d.p,{id:"requirementAssignedTo",value:W?"".concat(W.employeeName):"",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementPriority",children:"Priority"}),(0,a.jsxs)(u.l6,{value:e6.priority,onValueChange:e=>e8({...e6,priority:e}),children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select a priority"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"low",children:"Low"}),(0,a.jsx)(u.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(u.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>eK("general"),className:"w-full sm:w-auto",children:"Back"}),(0,a.jsx)(n.$,{onClick:()=>tB("requirement"),className:"w-full sm:w-auto",children:"Create Requirement"})]})]})})]})})]})}),eW&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-2xl border-0 shadow-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(i.aR,{className:"pb-4",children:[(0,a.jsx)(i.ZB,{className:"text-lg md:text-xl font-semibold text-foreground",children:"Create Complaint"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Fill in the complaint details"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)(o.tU,{value:eQ,onValueChange:e0,className:"w-full",children:[(0,a.jsxs)(o.j7,{className:"grid w-full grid-cols-2 mb-4",children:[(0,a.jsx)(o.Xi,{value:"general",children:"General"}),(0,a.jsx)(o.Xi,{value:"details",children:"Details"})]}),(0,a.jsx)(o.av,{value:"general",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintTitle",children:"Complaint Title"}),(0,a.jsx)(d.p,{id:"complaintTitle",placeholder:"Enter complaint title",value:e5.taskTitle,onChange:e=>e7({...e5,taskTitle:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintDescription",children:"Complaint Description"}),(0,a.jsx)(d.p,{id:"complaintDescription",placeholder:"Enter complaint description",value:e5.taskDesciption,onChange:e=>e7({...e5,taskDesciption:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintCategory",children:"Category"}),(0,a.jsxs)(u.l6,{value:"complaint",disabled:!0,children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Complaint"})}),(0,a.jsx)(u.gC,{children:(0,a.jsx)(u.eb,{value:"complaint",children:"Complaint"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintStoreName",children:"Store"}),(0,a.jsx)(d.p,{id:"complaintStoreName",value:W?"".concat(W.storeName):"Loading...",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>eX(!1),className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(n.$,{onClick:()=>e0("details"),className:"w-full sm:w-auto",children:"Next"})]})]})}),(0,a.jsx)(o.av,{value:"details",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintDueDate",children:"Due Date"}),(0,a.jsxs)(B.AM,{children:[(0,a.jsx)(B.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",className:"w-full justify-start text-left font-normal ".concat(!e5.dueDate&&"text-muted-foreground"),children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e5.dueDate?(0,L.GP)(new Date(e5.dueDate),"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(B.hl,{className:"w-auto p-0",children:(0,a.jsx)(X,{mode:"single",selected:e5.dueDate?new Date(e5.dueDate):void 0,onSelect:e=>e7({...e5,dueDate:e?e.toISOString().split("T")[0]:""}),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintAssignedTo",children:"Assigned To"}),(0,a.jsx)(d.p,{id:"complaintAssignedTo",value:W?"".concat(W.employeeName):"",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintPriority",children:"Priority"}),(0,a.jsxs)(u.l6,{value:e5.priority,onValueChange:e=>e7({...e5,priority:e}),children:[(0,a.jsx)(u.bq,{className:"w-full",children:(0,a.jsx)(u.yv,{placeholder:"Select a priority"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"low",children:"Low"}),(0,a.jsx)(u.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(u.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>e0("general"),className:"w-full sm:w-auto",children:"Back"}),(0,a.jsx)(n.$,{onClick:()=>tB("complaint"),className:"w-full sm:w-auto",children:"Create Complaint"})]})]})})]})})]})}),eD&&eM&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>eI(!1),children:(0,a.jsxs)("div",{className:"relative max-w-4xl max-h-4xl p-4",children:[(0,a.jsx)(et.default,{src:eM,alt:"Preview Image",width:800,height:600,className:"max-w-full max-h-full object-contain",onClick:e=>e.stopPropagation()}),(0,a.jsx)("button",{className:"absolute top-2 right-2 bg-white rounded-full p-2 hover:bg-gray-100",onClick:()=>eI(!1),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}}},e=>{e.O(0,[9358,9,1052,1691,7715,5257,8640,9687,6810,8441,1255,7358],()=>e(e.s=93526)),_N_E=e.O()}]);