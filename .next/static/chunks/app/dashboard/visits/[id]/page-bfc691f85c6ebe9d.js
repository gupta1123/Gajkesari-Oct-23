(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4632],{1524:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},39562:(e,s,t)=>{"use strict";t.d(s,{default:()=>W});var a=t(95155),l=t(12115),i=t(20063),r=t(97003),n=t(83209),d=t(90923),c=t(67812),o=t(33789),m=t(90235),x=t(47507),h=t(26983),u=t(35299),p=t(42529),g=t(16485),j=t(20508),f=t(69141),N=t(23664),v=t(21873),b=t(35626),y=t(55136),w=t(6191),k=t(87066),C=t(71847);let T=(0,C.A)("list-todo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),A=(0,C.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),D=(0,C.A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var S=t(84926),I=t(1524),M=t(71871),q=t(89715);let P=(0,C.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var V=t(90368),E=t(27937);let B=(0,C.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var R=t(11010),L=t(71360),F=t(71163),z=t(26467),$=t(73344),O=t(97450),Z=t(55725),G=t(37621),J=t(56069),H=t(15239),U=t(86502);function W(){var e,s,t,C;let W=(0,i.useRouter)(),_=(0,i.useParams)(),X=null==_?void 0:_.id,{userRole:Y,userData:K,currentUser:Q}=(0,J.A)(),[ee,es]=(0,l.useState)(null),[et,ea]=(0,l.useState)("metrics"),[el,ei]=(0,l.useState)("visit-info"),[er,en]=(0,l.useState)([]),[ed,ec]=(0,l.useState)([]),[eo,em]=(0,l.useState)([]),[ex,eh]=(0,l.useState)([]),[eu,ep]=(0,l.useState)([]),[eg,ej]=(0,l.useState)([]),[ef,eN]=(0,l.useState)([]),[ev,eb]=(0,l.useState)([]),[ey,ew]=(0,l.useState)(!0),[ek,eC]=(0,l.useState)(null),[eT,eA]=(0,l.useState)([]),[eD,eS]=(0,l.useState)(!1),[eI,eM]=(0,l.useState)(null),[eq,eP]=(0,l.useState)(1),[eV,eE]=(0,l.useState)(3),[eB,eR]=(0,l.useState)(""),[eL,eF]=(0,l.useState)(!1),[ez,e$]=(0,l.useState)("all"),[eO,eZ]=(0,l.useState)([]),[eG,eJ]=(0,l.useState)([]),[eH,eU]=(0,l.useState)(!1),[eW,e_]=(0,l.useState)(!1),[eX,eY]=(0,l.useState)("general"),[eK,eQ]=(0,l.useState)("general"),[e0,e1]=(0,l.useState)([]),[e2,e4]=(0,l.useState)([]),[e3,e6]=(0,l.useState)({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number(X),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),[e5,e8]=(0,l.useState)({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number(X),visitDate:"",status:"Assigned",priority:"low",taskType:"complaint",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),[e7,e9]=(0,l.useState)(null),[se,ss]=(0,l.useState)(!1),[st,sa]=(0,l.useState)(!1),[sl,si]=(0,l.useState)(!1),[sr,sn]=(0,l.useState)(""),[sd,sc]=(0,l.useState)(null),[so,sm]=(0,l.useState)(null),[sx,sh]=(0,l.useState)(!1),[su,sp]=(0,l.useState)(""),[sg,sj]=(0,l.useState)([]),[sf,sN]=(0,l.useState)([]),[sv,sb]=(0,l.useState)(""),[sy,sw]=(0,l.useState)(""),sk=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);(0,l.useEffect)(()=>{var e;ss(!!("MANAGER"===Y||(null==Q||null==(e=Q.authorities)?void 0:e.some(e=>"ROLE_MANAGER"===e.authority))))},[Y,Q]);let sC=e=>{let s={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800";return(0,a.jsx)("span",{className:"status-badge ".concat(s),children:e})},sT=e=>{let s={Assigned:"bg-muted text-muted-foreground","Work in Progress":"bg-orange-100 text-orange-800",Complete:"bg-green-100 text-green-800"},t=e in s?s[e]:"bg-gray-100 text-gray-800";return(0,a.jsx)("span",{className:"status-badge ".concat(t),children:e})},sA=async(e,s)=>{try{new G.n;let t=await Promise.all(s.filter(e=>"check-in"===e.tag).map(async s=>{try{let t=await fetch("https://api.gajkesaristeels.in/visit/downloadFile/".concat(e,"/check-in/").concat(s.fileName),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!t.ok)throw Error("Failed to fetch image");let a=await t.blob();return URL.createObjectURL(a)}catch(e){return console.error("Error fetching individual image:",e),null}}));eA(t.filter(e=>null!==e))}catch(e){console.error("Error fetching check-in images:",e),eA([])}},sD=(0,l.useCallback)(async e=>{try{ew(!0),eC(null);let s=new G.n,t=await s.getVisitById(Number(e));es({...t,purpose:t.purpose||"",priority:t.priority||"low",outcome:t.outcome||null,brandsInUse:t.brandsInUse||[],brandProCons:t.brandProCons||[],createdAt:t.createdAt||"",updatedAt:t.updatedAt||"",storeId:t.storeId||0,employeeId:t.employeeId||0}),sS(t.checkinTime||"",t.checkoutTime||""),ew(!1),(async()=>{try{var a,l,i;let[r,n,d,c,o,m,x]=await Promise.all([s.getVisitProCons(Number(e)),s.getIntentAuditByVisit(Number(e)),s.getMonthlySaleByVisit(Number(e)),s.getTasksByVisit("requirement",Number(e)),s.getTasksByVisit("complaint",Number(e)),s.getNotesByVisit(Number(e)),s.getVisitsByStore(t.storeId||0)]);ec(r||[]),em(n||[]),eh(d||[]),ep(c||[]),ej(o||[]),eN(m||[]);let h=(x||[]).slice().sort((e,s)=>{let t=new Date(e.visit_date).getTime();return new Date(s.visit_date).getTime()-t});if(eb(h),n&&n.length>0){let e=null!=(l=null==(a=n[n.length-1])?void 0:a.newIntentLevel)?l:"N/A";en(s=>[...s.filter(e=>"Intent Level"!==e.title),{title:"Intent Level",value:String(e)}])}if(d&&d.length>0){let e="".concat(d[0].newMonthlySale.toLocaleString()," tons");en(s=>[...s.filter(e=>"Monthly Sales"!==e.title),{title:"Monthly Sales",value:e}])}if(t.attachmentResponse&&t.attachmentResponse.length>0&&sA(Number(e),t.attachmentResponse),x&&x.length>0){let e=x[0];e9({contactNumber:(null==(i=e.storePrimaryContact)?void 0:i.toString())||"Not available",city:e.city||"Not available",address:"".concat(e.subDistrict||"",", ").concat(e.district||"",", ").concat(e.state||"").replace(/^[, ]+|[, ]+$/g,"")||"Not available"})}}catch(e){console.error("Error loading visit auxiliary data:",e)}})()}catch(e){eC((null==e?void 0:e.message)||"Failed to load visit details"),console.error("Error fetching visit details:",e),ew(!1)}},[]),sS=(e,s)=>{if(!e||!s)return void en(e=>e.filter(e=>"Visit Duration"!==e.title));let t=new Date("1970-01-01T".concat(e,"Z")),a=new Date(new Date("1970-01-01T".concat(s,"Z")).getTime()-t.getTime()),l=a.getUTCHours(),i=a.getUTCMinutes(),r="0";(l>0||i>0)&&(r="".concat(l>0?"".concat(l," hour").concat(l>1?"s":""," "):"").concat(i>0?"".concat(i," minute").concat(i>1?"s":""):"").trim()),en(e=>[...e.filter(e=>"Visit Duration"!==e.title),{title:"Visit Duration",value:r}])};(0,l.useEffect)(()=>{X&&sD(X)},[X,sD]);let sI=e=>{e$(e)},sM=(0,l.useCallback)(()=>{let e=e=>"all"===ez?e:e.filter(e=>e.priority===ez);eZ(e(eu)),eJ(e(eg))},[ez,eu,eg]),sq=eq*eV,sP=sq-eV,sV=ev.slice(sP,sq),sE=Math.ceil(ev.length/eV);(0,l.useEffect)(()=>{eP(1)},[eV]),(0,l.useEffect)(()=>{sM()},[eu,eg,ez,sM]);let sB=(null==(C=ee)?void 0:C.checkinTime)&&(null==C?void 0:C.checkoutTime)?{emoji:"✅",status:"Completed",color:"bg-purple-100 text-purple-800",isOngoing:!1}:(null==C?void 0:C.checkoutTime)?{emoji:"⏱️",status:"Checked Out",color:"bg-orange-100 text-orange-800",isOngoing:!1}:(null==C?void 0:C.checkinTime)?{emoji:"\uD83D\uDD70️",status:"On Going",color:"bg-green-100 text-green-800",isOngoing:!0}:{emoji:"\uD83D\uDCC5",status:"Assigned",color:"bg-muted text-muted-foreground",isOngoing:!1};g.A,ee&&"".concat((0,F.GP)(new Date(ee.visit_date),"MMM d, yyyy")," at ").concat(ee.checkinTime||"N/A"),h.A,null==(e=er.find(e=>"Visit Duration"===e.title))||e.value,j.A,null==ee||ee.employeeName,f.A,null==e7||e7.contactNumber,N.A,v.A,null==e7||e7.address;let sR=[{label:"Total Visits",value:ev.length},{label:"Intent Level",value:(null==(s=er.find(e=>"Intent Level"===e.title))?void 0:s.value)||"N/A"},{label:"Monthly Sale",value:(null==(t=er.find(e=>"Monthly Sales"===e.title))?void 0:t.value)||"N/A"},{label:"Priority",value:(null==ee?void 0:ee.priority)||"N/A"}],sL=e=>{eM(e),eS(!0)},sF=async()=>{if(sr.trim())try{if(sl&&null!==sd){if(so){if(!(await fetch("https://api.gajkesaristeels.in/notes/edit?id=".concat(sd),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},body:JSON.stringify({content:sr,employeeId:so.employeeId,storeId:so.storeId})})).ok)throw Error("Failed to update note");let e=ef.map(e=>e.id===sd?{...e,content:sr}:e);eN(e)}}else if(ee){let e=await fetch("https://api.gajkesaristeels.in/notes/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},body:JSON.stringify({content:sr,employeeId:ee.employeeId||0,storeId:ee.storeId||0,visitId:Number(X)})});if(!e.ok)throw Error("Failed to create note");let s={id:(await e.json()).id,content:sr,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],createdTime:new Date().toISOString(),updatedTime:new Date().toISOString(),employeeId:ee.employeeId||0,employeeName:ee.employeeName||"",storeId:ee.storeId||0,storeName:ee.storeName||"",visitId:Number(X)};eN([s,...ef])}sa(!1),sn(""),si(!1),sc(null)}catch(e){console.error("Error saving note:",e)}},sz=async e=>{try{if(!(await fetch("https://api.gajkesaristeels.in/notes/delete?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}})).ok)throw Error("Failed to delete note");eN(ef.filter(s=>s.id!==e))}catch(e){console.error("Error deleting note:",e)}},s$=async e=>{try{var s,t,a,l;let i={..."requirement"===e?e3:e5,taskType:e,storeId:null!=(s=null==ee?void 0:ee.storeId)?s:0,assignedToId:null!=(t=null==ee?void 0:ee.employeeId)?t:0,assignedToName:null!=(a=null==ee?void 0:ee.employeeName)?a:"",storeName:null!=(l=null==ee?void 0:ee.storeName)?l:"",visitId:Number(X)},r=await fetch("https://api.gajkesaristeels.in/task/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},body:JSON.stringify(i)});if(!r.ok)throw Error("Failed to create task");let n={id:(await r.json()).id,title:i.taskTitle,description:i.taskDesciption,type:i.taskType,status:i.status,priority:i.priority,assignedTo:i.assignedToName,dueDate:i.dueDate,visitId:i.visitId};"requirement"===e?(ep(e=>[n,...e]),e6({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number(X),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),eU(!1),eY("general")):(ej(e=>[n,...e]),e8({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number(X),visitDate:"",status:"Assigned",priority:"low",taskType:"complaint",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),e_(!1),eQ("general"))}catch(e){console.error("Error creating task:",e)}};return ey?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"visit-details grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-6",children:[(0,a.jsxs)("aside",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,a.jsxs)("div",{className:"back-button-container flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"back-button flex items-center cursor-pointer text-foreground hover:text-muted-foreground",onClick:()=>{W.back()},children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)(c.E,{className:"flex items-center gap-2 px-3 py-1 text-sm font-medium",children:[(e=>{switch(e){case"Assigned":return(0,a.jsx)(h.A,{className:"w-4 h-4"});case"On Going":return(0,a.jsx)(u.A,{className:"w-4 h-4"});case"Checked Out":case"Completed":return(0,a.jsx)(p.A,{className:"w-4 h-4"});default:return null}})(sB.status),(0,a.jsx)("span",{children:sB.status})]}),Y&&(0,a.jsx)(c.E,{variant:se?"secondary":"default",className:"text-xs",children:se?"Manager View":"Admin View"})]})]}),(0,a.jsx)(n.Zp,{className:"bg-transparent border-0 shadow-none",children:(0,a.jsxs)(n.Wu,{className:"p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"profile text-center mb-4 md:mb-6",children:[(0,a.jsx)("div",{className:"avatar w-12 h-12 md:w-16 md:h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("span",{className:"text-lg md:text-xl font-semibold text-foreground",children:sk((null==ee?void 0:ee.employeeName)||"")})}),(0,a.jsx)("h2",{className:"text-lg md:text-xl font-semibold",children:null==ee?void 0:ee.employeeName}),(0,a.jsx)("p",{className:"text-sm md:text-base text-gray-600 break-words",children:null==ee?void 0:ee.storeName})]}),(0,a.jsxs)("div",{className:"action-buttons grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-1 gap-2 md:gap-3 mb-4 md:mb-6",children:[(0,a.jsxs)(r.$,{className:"w-full text-sm",onClick:()=>{ee&&ee.storeId&&W.push("/dashboard/customers/".concat(ee.storeId))},children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"View Store"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Store"})]}),(0,a.jsxs)(r.$,{className:"w-full text-sm",onClick:()=>eU(!0),children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Add Requirement"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Requirement"})]}),(0,a.jsxs)(r.$,{className:"w-full text-sm",onClick:()=>e_(!0),children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Add Complaint"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Complaint"})]})]})]})}),(0,a.jsxs)(n.Zp,{className:"w-full border border-border bg-card shadow-sm",children:[(0,a.jsx)(n.aR,{className:"pb-4",children:(0,a.jsx)(n.ZB,{className:"text-base font-semibold text-foreground text-center",children:"Visit Information"})}),(0,a.jsxs)(n.Wu,{className:"p-0",children:[(0,a.jsxs)("div",{className:"flex border-b border-border",children:[(0,a.jsx)("button",{className:"flex-1 px-3 py-2 text-sm font-medium border-b-2 transition-colors ".concat("visit-info"===el?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>ei("visit-info"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Visit Info"})]})}),(0,a.jsx)("button",{className:"flex-1 px-3 py-2 text-sm font-medium border-b-2 transition-colors ".concat("store-info"===el?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>ei("store-info"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Store Info"})]})})]}),(0,a.jsxs)("div",{className:"p-4",children:["visit-info"===el&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900",children:(0,a.jsx)(T,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Purpose"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground break-words",children:(null==ee?void 0:ee.purpose)||"N/A"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-yellow-100 dark:bg-yellow-900",children:(0,a.jsx)(v.A,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Location"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null==ee?void 0:ee.checkinLatitude)&&(null==ee?void 0:ee.checkinLongitude)?(0,a.jsxs)("button",{onClick:()=>{(null==ee?void 0:ee.checkinLatitude)&&(null==ee?void 0:ee.checkinLongitude)&&window.open("https://www.google.com/maps?q=".concat(ee.checkinLatitude,",").concat(ee.checkinLongitude),"_blank")},className:"text-foreground hover:text-muted-foreground transition-colors flex items-center gap-1",children:[(0,a.jsx)(A,{className:"w-4 h-4"}),"View Location"]}):(0,a.jsx)("span",{children:"Location not available"})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-green-100 dark:bg-green-900",children:(0,a.jsx)(D,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Check-in"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null==ee?void 0:ee.checkinDate)&&(null==ee?void 0:ee.checkinTime)?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:(0,F.GP)(new Date(ee.checkinDate),"dd MMM yyyy")}),(0,a.jsx)("span",{className:"text-xs",children:(0,F.GP)((0,z.H)("1970-01-01T".concat(ee.checkinTime)),"h:mm a")})]}):(0,a.jsx)("span",{children:"Check-in not available"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-red-100 dark:bg-red-900",children:(0,a.jsx)(S.A,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Check-out"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null==ee?void 0:ee.checkoutDate)&&(null==ee?void 0:ee.checkoutTime)?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:(0,F.GP)(new Date(ee.checkoutDate),"dd MMM yyyy")}),(0,a.jsx)("span",{className:"text-xs",children:(0,F.GP)((0,z.H)("1970-01-01T".concat(ee.checkoutTime)),"h:mm a")})]}):(0,a.jsx)("span",{children:"Check-out not available"})})]})]})]})]}),"store-info"===el&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 p-4 bg-muted/30 rounded-lg",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:(0,a.jsx)(y.A,{className:"h-5 w-5 text-muted-foreground"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground text-base break-words",children:null==ee?void 0:ee.storeName}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:null==e7?void 0:e7.city})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-muted",children:(0,a.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Contact"}),(null==e7?void 0:e7.contactNumber)?(0,a.jsx)("a",{href:"tel:".concat(e7.contactNumber),className:"text-sm text-foreground hover:text-muted-foreground transition-colors break-words",children:e7.contactNumber}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No contact available"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-green-100 dark:bg-green-900",children:(0,a.jsx)(v.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Location"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("p",{className:"break-words",children:(null==e7?void 0:e7.address)||"Address not available"}),(null==e7?void 0:e7.city)&&(0,a.jsxs)("button",{onClick:()=>window.open("https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(null==ee?void 0:ee.storeName," ").concat(null==e7?void 0:e7.address))),"_blank"),className:"text-foreground hover:text-muted-foreground transition-colors mt-1 inline-flex items-center gap-1 text-xs",children:[(0,a.jsx)(A,{className:"w-4 h-4"}),"View on Maps"]})]})]})]})]})]})]})]})]})]}),(0,a.jsxs)("section",{className:"lg:col-span-6",children:[(0,a.jsxs)("div",{className:"tabs border-b mb-4 md:mb-6",children:[(0,a.jsx)("div",{className:"md:hidden mb-3",children:(0,a.jsxs)(x.l6,{value:et,onValueChange:ea,children:[(0,a.jsx)(x.bq,{className:"w-full",children:(0,a.jsx)(x.yv,{placeholder:"Select section"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"metrics",children:"Visit Metrics"}),(0,a.jsx)(x.eb,{value:"visits",children:"Recent Visits"}),(0,a.jsx)(x.eb,{value:"brands",children:"Brands"}),(0,a.jsx)(x.eb,{value:"requirements",children:"Requirements"}),(0,a.jsx)(x.eb,{value:"complaints",children:"Complaints"})]})]})}),(0,a.jsxs)("div",{className:"hidden md:flex md:gap-2 md:overflow-x-auto md:flex-nowrap",children:[(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("metrics"===et?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>ea("metrics"),children:[(0,a.jsx)(I.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Metrics"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("visits"===et?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>ea("visits"),children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Visits"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("brands"===et?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>ea("brands"),children:[(0,a.jsx)(M.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Brands"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("requirements"===et?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>ea("requirements"),children:[(0,a.jsx)(q.A,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Requirements"})]}),(0,a.jsxs)("button",{className:"tab py-2 px-3 border-b-2 font-medium text-sm rounded transition-colors whitespace-nowrap ".concat("complaints"===et?"border-border text-card-foreground bg-card shadow-sm":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),onClick:()=>ea("complaints"),children:[(0,a.jsx)(P,{className:"w-4 h-4 mr-2 inline"}),(0,a.jsx)("span",{children:"Complaints"})]})]})]}),(0,a.jsxs)("div",{className:"tab-content",children:["metrics"===et&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{className:"text-base font-semibold text-foreground",children:"Visit Metrics"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:sR.map((e,s)=>(0,a.jsxs)("div",{className:"text-center p-3 md:p-4 bg-muted/30 rounded-lg",children:[(0,a.jsx)($.EY,{size:"sm",tone:"muted",weight:"medium",className:"mb-2",children:e.label}),(0,a.jsx)($.DZ,{size:"lg",weight:"semibold",className:"text-foreground break-words",children:e.value})]},s))})})]}),"visits"===et&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"filter-bar mb-4",children:(0,a.jsx)(o.p,{placeholder:"Search by Visit Purpose",value:eB,onChange:e=>eR(e.target.value),className:"w-full md:w-64"})}),(0,a.jsx)("div",{className:"visits-list space-y-3",children:sV.map(e=>{let s=e.checkinDate&&e.checkinTime&&e.checkoutDate&&e.checkoutTime?{status:"Completed",color:"bg-green-100 text-green-800",icon:"✅"}:e.checkinDate&&e.checkinTime?{status:"In Progress",color:"bg-blue-100 text-blue-800",icon:"\uD83D\uDD50"}:{status:"Scheduled",color:"bg-yellow-100 text-yellow-800",icon:"\uD83D\uDCC5"};return(0,a.jsx)(n.Zp,{className:"w-full hover:shadow-sm transition-all duration-200 border-l-2 border-l-primary/30 hover:border-l-primary",children:(0,a.jsxs)(n.Wu,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-primary/10",children:(0,a.jsx)(g.A,{className:"h-3 w-3 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-sm text-foreground",children:e.purpose}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ID: ",e.id]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(c.E,{className:"".concat(s.color," text-xs px-2 py-1"),children:[(0,a.jsx)("span",{className:"mr-1",children:s.icon}),s.status]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-foreground",children:e.checkinDate&&e.checkinTime?(0,F.GP)(new Date(e.checkinDate),"dd MMM ''yy"):"TBD"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.checkinDate&&e.checkinTime?(0,F.GP)((0,z.H)("1970-01-01T".concat(e.checkinTime)),"h:mm a"):"TBD"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(j.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.employeeName})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground truncate max-w-32",children:e.storeName})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(h.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.checkinDate&&e.checkinTime&&e.checkoutDate&&e.checkoutTime?((e,s)=>{try{let t=new Date("2000-01-01T".concat(e)),a=new Date("2000-01-01T".concat(s)).getTime()-t.getTime(),l=Math.floor(a/6e4),i=Math.floor(l/60);return"".concat(i,"h ").concat(l%60,"m")}catch(e){return"N/A"}})(e.checkinTime,e.checkoutTime):"TBD"})]}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>W.push("/dashboard/visits/".concat(e.id)),className:"text-xs h-6 px-2",children:"View"})]})]})]})},e.id)})}),ev.length>eV&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(r.$,{onClick:()=>eF(!eL),children:eL?"Show Less":"Show More"}),eL&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.J,{htmlFor:"pageSize",children:"Rows per page:"}),(0,a.jsxs)(x.l6,{value:eV.toString(),onValueChange:e=>eE(parseInt(e)),children:[(0,a.jsx)(x.bq,{className:"w-20",children:(0,a.jsx)(x.yv,{})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"3",children:"3"}),(0,a.jsx)(x.eb,{value:"5",children:"5"}),(0,a.jsx)(x.eb,{value:"10",children:"10"}),(0,a.jsx)(x.eb,{value:"25",children:"25"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>eP(Math.max(1,eq-1)),disabled:1===eq,children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",eq," of ",sE]}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>eP(Math.min(sE,eq+1)),disabled:eq>=sE,children:["Next",(0,a.jsx)(E.A,{className:"h-4 w-4"})]})]})]})]})]}),"brands"===et&&(0,a.jsx)(U.A,{brands:ed,setBrands:ec,visitId:X,token:localStorage.getItem("authToken"),fetchVisitDetail:async()=>{X&&await sD(X)}}),"requirements"===et&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"filter-bar mb-4",children:(0,a.jsxs)(x.l6,{value:ez,onValueChange:sI,children:[(0,a.jsx)(x.bq,{className:"w-full md:w-48",children:(0,a.jsx)(x.yv,{placeholder:"Filter by Priority"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"all",children:"All Priorities"}),(0,a.jsx)(x.eb,{value:"low",children:"Low"}),(0,a.jsx)(x.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(x.eb,{value:"high",children:"High"})]})]})}),(0,a.jsx)("div",{className:"requirements-list space-y-3 md:space-y-4",children:eO.map((e,s)=>(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-3 md:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 mb-3",children:[(0,a.jsx)("span",{className:"font-medium text-foreground text-sm md:text-base break-words",children:e.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[sC(e.priority),sT(e.status)]})]}),(0,a.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 space-y-2",children:[(0,a.jsxs)("p",{children:["Due: ",(0,F.GP)(new Date(e.dueDate),"MMM d, yyyy")]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"avatar w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-200 flex items-center justify-center mr-2",children:(0,a.jsx)("span",{className:"text-xs",children:sk(e.assignedTo||"Unknown")})}),(0,a.jsxs)("span",{className:"break-words",children:["Assigned to ",e.assignedTo||"Unknown"]})]}),(0,a.jsx)("p",{className:"break-words",children:e.description})]})]})},s))})]}),"complaints"===et&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"filter-bar mb-4",children:(0,a.jsxs)(x.l6,{value:ez,onValueChange:sI,children:[(0,a.jsx)(x.bq,{className:"w-full md:w-48",children:(0,a.jsx)(x.yv,{placeholder:"Filter by Priority"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"all",children:"All Priorities"}),(0,a.jsx)(x.eb,{value:"low",children:"Low"}),(0,a.jsx)(x.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(x.eb,{value:"high",children:"High"})]})]})}),(0,a.jsx)("div",{className:"complaints-list space-y-3 md:space-y-4",children:eG.map((e,s)=>(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-3 md:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 mb-3",children:[(0,a.jsx)("span",{className:"font-medium text-foreground text-sm md:text-base break-words",children:e.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[sC(e.priority),sT(e.status)]})]}),(0,a.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 space-y-2",children:[(0,a.jsxs)("p",{children:["Reported: ",(0,F.GP)(new Date(e.dueDate),"MMM d, yyyy")]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"avatar w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-200 flex items-center justify-center mr-2",children:(0,a.jsx)("span",{className:"text-xs",children:sk(e.assignedTo||"Unknown")})}),(0,a.jsxs)("span",{className:"break-words",children:["Handled by ",e.assignedTo||"Unknown"]})]}),(0,a.jsx)("p",{className:"break-words",children:e.description})]})]})},s))})]})]})]}),(0,a.jsxs)("aside",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3 md:pb-4",children:(0,a.jsx)($.DZ,{as:"h3",size:"lg",weight:"semibold",className:"text-base md:text-lg",children:"Check-in Images"})}),(0,a.jsx)(n.Wu,{className:"p-3 md:p-6",children:eT.length>0?(0,a.jsx)("div",{className:"space-y-3 md:space-y-4",children:eT.map((e,s)=>(0,a.jsxs)("div",{className:"rounded-lg border overflow-hidden",children:[(0,a.jsx)("div",{className:"relative w-full h-32 md:h-40 bg-gray-100",children:(0,a.jsx)(H.default,{src:e,alt:"Check-in image ".concat(s+1),width:300,height:200,className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>sL(e)})}),(0,a.jsxs)("div",{className:"p-2 md:p-3",children:[(0,a.jsxs)($.DZ,{as:"h4",size:"sm",weight:"semibold",className:"text-sm md:text-base",children:["Check-in Image ",s+1]}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",className:"mt-2 w-full text-xs md:text-sm",onClick:()=>sL(e),children:"View Full Size"})]})]},s))}):(0,a.jsxs)("div",{className:"text-center py-6 md:py-8",children:[(0,a.jsx)(B,{className:"h-8 w-8 md:h-12 md:w-12 text-gray-400 mx-auto mb-3 md:mb-4"}),(0,a.jsx)($.EY,{tone:"muted",className:"text-sm md:text-base",children:"No images available for this visit"})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3 md:pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,a.jsx)($.DZ,{as:"h3",size:"lg",weight:"semibold",className:"text-base md:text-lg",children:"Notes"}),(0,a.jsxs)(r.$,{onClick:()=>{si(!1),sn(""),sa(!0)},size:"sm",className:"text-xs md:text-sm",children:[(0,a.jsx)(w.A,{className:"h-3 w-3 md:h-4 md:w-4 mr-1 md:mr-2"}),"Add Note"]})]})}),(0,a.jsx)(n.Wu,{className:"p-3 md:p-6",children:(0,a.jsx)("div",{className:"notes-list space-y-3",children:ef.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-3 md:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,F.GP)(new Date(e.createdDate),"MMM d, yyyy")}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{variant:"ghost",size:"icon",onClick:()=>{sn(e.content),si(!0),sc(e.id),sm({employeeId:e.employeeId,storeId:e.storeId}),sa(!0)},className:"h-7 w-7",children:(0,a.jsx)(R.A,{className:"h-3 w-3"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"icon",onClick:()=>sz(e.id),className:"h-7 w-7",children:(0,a.jsx)(L.A,{className:"h-3 w-3"})})]})]}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-foreground break-words",children:e.content})]},e.id))})})]})]})]}),st&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,a.jsxs)(n.Zp,{className:"w-full max-w-md border-0 shadow-lg",children:[(0,a.jsx)(n.aR,{className:"pb-4",children:(0,a.jsx)(n.ZB,{className:"text-lg md:text-xl font-semibold text-foreground",children:sl?"Edit Note":"Add Note"})}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsx)("textarea",{placeholder:"Enter note content",value:sr,onChange:e=>sn(e.target.value),rows:4,className:"w-full px-3 py-2 border border-input bg-background rounded-md text-sm resize-none focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>sa(!1),className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(r.$,{onClick:sF,className:"w-full sm:w-auto",children:sl?"Update":"Add"})]})]})]})}),eH&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,a.jsxs)(n.Zp,{className:"w-full max-w-2xl border-0 shadow-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(n.aR,{className:"pb-4",children:[(0,a.jsx)(n.ZB,{className:"text-lg md:text-xl font-semibold text-foreground",children:"Create Requirement"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Fill in the requirement details"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)(d.tU,{value:eX,onValueChange:eY,className:"w-full",children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-2 mb-4",children:[(0,a.jsx)(d.Xi,{value:"general",children:"General"}),(0,a.jsx)(d.Xi,{value:"details",children:"Details"})]}),(0,a.jsx)(d.av,{value:"general",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementTitle",children:"Requirement Title"}),(0,a.jsx)(o.p,{id:"requirementTitle",placeholder:"Enter requirement title",value:e3.taskTitle,onChange:e=>e6({...e3,taskTitle:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementDescription",children:"Requirement Description"}),(0,a.jsx)(o.p,{id:"requirementDescription",placeholder:"Enter requirement description",value:e3.taskDesciption,onChange:e=>e6({...e3,taskDesciption:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementCategory",children:"Category"}),(0,a.jsxs)(x.l6,{value:"requirement",disabled:!0,children:[(0,a.jsx)(x.bq,{className:"w-full",children:(0,a.jsx)(x.yv,{placeholder:"Requirement"})}),(0,a.jsx)(x.gC,{children:(0,a.jsx)(x.eb,{value:"requirement",children:"Requirement"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementStoreName",children:"Store"}),(0,a.jsx)(o.p,{id:"requirementStoreName",value:ee?"".concat(ee.storeName):"Loading...",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>eU(!1),className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(r.$,{onClick:()=>eY("details"),className:"w-full sm:w-auto",children:"Next"})]})]})}),(0,a.jsx)(d.av,{value:"details",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementDueDate",children:"Due Date"}),(0,a.jsxs)(O.AM,{children:[(0,a.jsx)(O.Wv,{asChild:!0,children:(0,a.jsxs)(r.$,{variant:"outline",className:"w-full justify-start text-left font-normal ".concat(!e3.dueDate&&"text-muted-foreground"),children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),e3.dueDate?(0,F.GP)(new Date(e3.dueDate),"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(O.hl,{className:"w-auto p-0",children:(0,a.jsx)(Z.V,{mode:"single",selected:e3.dueDate?new Date(e3.dueDate):void 0,onSelect:e=>e6({...e3,dueDate:e?e.toISOString().split("T")[0]:""}),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementAssignedTo",children:"Assigned To"}),(0,a.jsx)(o.p,{id:"requirementAssignedTo",value:ee?"".concat(ee.employeeName):"",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"requirementPriority",children:"Priority"}),(0,a.jsxs)(x.l6,{value:e3.priority,onValueChange:e=>e6({...e3,priority:e}),children:[(0,a.jsx)(x.bq,{className:"w-full",children:(0,a.jsx)(x.yv,{placeholder:"Select a priority"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"low",children:"Low"}),(0,a.jsx)(x.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(x.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>eY("general"),className:"w-full sm:w-auto",children:"Back"}),(0,a.jsx)(r.$,{onClick:()=>s$("requirement"),className:"w-full sm:w-auto",children:"Create Requirement"})]})]})})]})})]})}),eW&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,a.jsxs)(n.Zp,{className:"w-full max-w-2xl border-0 shadow-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(n.aR,{className:"pb-4",children:[(0,a.jsx)(n.ZB,{className:"text-lg md:text-xl font-semibold text-foreground",children:"Create Complaint"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Fill in the complaint details"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)(d.tU,{value:eK,onValueChange:eQ,className:"w-full",children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-2 mb-4",children:[(0,a.jsx)(d.Xi,{value:"general",children:"General"}),(0,a.jsx)(d.Xi,{value:"details",children:"Details"})]}),(0,a.jsx)(d.av,{value:"general",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintTitle",children:"Complaint Title"}),(0,a.jsx)(o.p,{id:"complaintTitle",placeholder:"Enter complaint title",value:e5.taskTitle,onChange:e=>e8({...e5,taskTitle:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintDescription",children:"Complaint Description"}),(0,a.jsx)(o.p,{id:"complaintDescription",placeholder:"Enter complaint description",value:e5.taskDesciption,onChange:e=>e8({...e5,taskDesciption:e.target.value}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintCategory",children:"Category"}),(0,a.jsxs)(x.l6,{value:"complaint",disabled:!0,children:[(0,a.jsx)(x.bq,{className:"w-full",children:(0,a.jsx)(x.yv,{placeholder:"Complaint"})}),(0,a.jsx)(x.gC,{children:(0,a.jsx)(x.eb,{value:"complaint",children:"Complaint"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintStoreName",children:"Store"}),(0,a.jsx)(o.p,{id:"complaintStoreName",value:ee?"".concat(ee.storeName):"Loading...",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>e_(!1),className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(r.$,{onClick:()=>eQ("details"),className:"w-full sm:w-auto",children:"Next"})]})]})}),(0,a.jsx)(d.av,{value:"details",children:(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintDueDate",children:"Due Date"}),(0,a.jsxs)(O.AM,{children:[(0,a.jsx)(O.Wv,{asChild:!0,children:(0,a.jsxs)(r.$,{variant:"outline",className:"w-full justify-start text-left font-normal ".concat(!e5.dueDate&&"text-muted-foreground"),children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),e5.dueDate?(0,F.GP)(new Date(e5.dueDate),"PPP"):(0,a.jsx)("span",{children:"Pick a date"})]})}),(0,a.jsx)(O.hl,{className:"w-auto p-0",children:(0,a.jsx)(Z.V,{mode:"single",selected:e5.dueDate?new Date(e5.dueDate):void 0,onSelect:e=>e8({...e5,dueDate:e?e.toISOString().split("T")[0]:""}),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintAssignedTo",children:"Assigned To"}),(0,a.jsx)(o.p,{id:"complaintAssignedTo",value:ee?"".concat(ee.employeeName):"",disabled:!0,className:"w-full bg-gray-100 text-foreground font-medium cursor-not-allowed"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"complaintPriority",children:"Priority"}),(0,a.jsxs)(x.l6,{value:e5.priority,onValueChange:e=>e8({...e5,priority:e}),children:[(0,a.jsx)(x.bq,{className:"w-full",children:(0,a.jsx)(x.yv,{placeholder:"Select a priority"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"low",children:"Low"}),(0,a.jsx)(x.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(x.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-2 mt-4",children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>eQ("general"),className:"w-full sm:w-auto",children:"Back"}),(0,a.jsx)(r.$,{onClick:()=>s$("complaint"),className:"w-full sm:w-auto",children:"Create Complaint"})]})]})})]})})]})}),eD&&eI&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>eS(!1),children:(0,a.jsxs)("div",{className:"relative max-w-4xl max-h-4xl p-4",children:[(0,a.jsx)(H.default,{src:eI,alt:"Preview Image",width:800,height:600,className:"max-w-full max-h-full object-contain",onClick:e=>e.stopPropagation()}),(0,a.jsx)("button",{className:"absolute top-2 right-2 bg-white rounded-full p-2 hover:bg-gray-100",onClick:()=>eS(!1),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}},84926:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},89715:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},93526:(e,s,t)=>{Promise.resolve().then(t.bind(t,39562))}},e=>{e.O(0,[9358,9,1052,1691,4627,5257,8640,9687,6810,6454,8441,1255,7358],()=>e(e.s=93526)),_N_E=e.O()}]);